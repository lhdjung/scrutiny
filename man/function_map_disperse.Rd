% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/function-map-disperse.R
\name{function_map_disperse}
\alias{function_map_disperse}
\title{Create new \verb{*_map_disperse()} functions}
\usage{
function_map_disperse(
  .fun,
  .reported,
  .name_test,
  .name_class = NULL,
  .dispersion = 0:5,
  .n_min = 1,
  .n_max = NULL,
  .show_all = FALSE,
  ...
)
}
\arguments{
\item{.fun}{Function such as \code{grim_map}: It will be used to test rows in a
data frame for consistency.}

\item{.reported}{String. Names of the columns containing group-specific
statistics that were reported alongside the total sample size(s). They will
be tested for consistency with the hypothetical group sizes. Examples are
\code{"x"} for GRIM and \code{c("x", "sd")} for DEBIT.}

\item{.name_test}{String (length 1). The name of the consistency test, such
as \code{"GRIM"}, to be optionally shown in a message when using the
manufactured function.}

\item{.name_class}{String. If specified, the tibbles returned by the
manufactured function will carry this string as an S3 class. Default is
\code{NULL}, i.e., no extra class.}

\item{.dispersion, .n_min, .n_max, .show_all}{Arguments passed down to
\code{disperse_total()}, using defaults from there.}

\item{...}{Arguments passed down to \code{.fun}.}
}
\value{
A function. See \code{grim_map_disperse()} for an example of a function
manufactured by \code{function_map_disperse()}.
}
\description{
\code{function_map_disperse()} is the engine that powers
\code{grim_map_disperse()}. It creates new, "manufactured" functions for
consistency tests which take reported summary statistics such as means, to
apply those tests in cases where only a total sample size is known, not
group sizes.

If functions created this way are exported from other packages, they should
be written as if they were created with
\href{https://purrr.tidyverse.org/reference/faq-adverbs-export.html}{purrr
adverbs}; see explanations there and examples below.
}
\details{
This function is a so-called function factory: It produces other
functions, such as \code{grim_map_disperse()}. More specifically, it is a
function operator (a.k.a. decorator) because it also takes functions as
inputs, such as \code{grim_map()}. See Wickham (2019, ch. 10-11).
}
\examples{
# Function definition of `grim_map_disperse()`:
grim_map_disperse <- function_map_disperse(
  .fun = grim_map,
  .reported = "x",
  .name_test = "GRIM",
  .name_class = "scr_grim_map_disperse"
)

# If you want to export a function manufactured
# with `function_map_disperse()` from your own
# package, follow this pattern (except for the
# `if`-wrapping here)...
if (FALSE) {

  schlim_map_disperse <- function(...) "dummy"

  .onLoad <- function(lib, pkg) {
    schlim_map_disperse <<- scrutiny::function_map_disperse(
      .fun = schlim_map,
      .reported = c("x", "y"),
      .name_test = "SCHLIM",
      .name_class = "yourpkg_schlim_map_disperse"
    )
  }   # ... where "x" and "y" are the types of
      # reported summary statistics to be tested
      # for consistency with the dispersed `n` values.

}
}
\references{
Bauer, P. J., & Francis, G. (2021). Expression of Concern: Is It
Light or Dark? Recalling Moral Behavior Changes Perception of Brightness.
\emph{Psychological Science}, 32(12), 2042â€“2043.
https://doi.org/10.1177/09567976211058727

Wickham, H. (2019). \emph{Advanced R} (Second Edition). CRC Press/Taylor and
Francis Group. https://adv-r.hadley.nz/index.html
}
\seealso{
\code{grim_map()}, \code{disperse_total()}, \code{grim_map_disperse()}
}
