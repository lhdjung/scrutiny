<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>GRIM • scrutiny</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="GRIM">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">scrutiny</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Consistency tests</h6></li>
    <li><a class="dropdown-item" href="../articles/grim.html">GRIM</a></li>
    <li><a class="dropdown-item" href="../articles/grimmer.html">GRIMMER</a></li>
    <li><a class="dropdown-item" href="../articles/debit.html">DEBIT</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Plausibility checks</h6></li>
    <li><a class="dropdown-item" href="../articles/duplicates.html">Duplication analysis</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Quick guides</h6></li>
    <li><a class="dropdown-item" href="../articles/rounding-options.html">Rounding options</a></li>
    <li><a class="dropdown-item" href="../articles/consistency-tests-simple.html">Implementing your consistency test</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Developer tools</h6></li>
    <li><a class="dropdown-item" href="../articles/rounding-in-depth.html">Rounding in depth</a></li>
    <li><a class="dropdown-item" href="../articles/consistency-tests-in-depth.html">Consistency tests in depth</a></li>
    <li><a class="dropdown-item" href="../articles/devtools.html">Developer tools</a></li>
    <li><a class="dropdown-item" href="../articles/wrangling.html">Data wrangling</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Other</h6></li>
    <li><a class="dropdown-item" href="../articles/related.html">Related software</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/lhdjung/scrutiny/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>GRIM</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/lhdjung/scrutiny/blob/v0.5.0/vignettes/grim.Rmd" class="external-link"><code>vignettes/grim.Rmd</code></a></small>
      <div class="d-none name"><code>grim.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lhdjung.github.io/scrutiny/">scrutiny</a></span><span class="op">)</span></span></code></pre></div>
<p>Granularity-related inconsistency of means, or GRIM, is a test for
the mathematical consistency of reported means or proportions with the
corresponding sample size <span class="citation">(Brown and Heathers
2017)</span>. It can be applied to summary statistics of discrete
numerical distributions. GRIM answers a simple question: Is it possible
that a granular distribution has both the reported mean or percentage
and the reported sample size?</p>
<p>This vignette covers scrutiny’s implementation of the GRIM test. It
has the following sections — to get started, though, you only need the
first one:</p>
<ol style="list-style-type: decimal">
<li><p>The basic <code><a href="../reference/grim.html">grim()</a></code> function and a specialized mapping
function, <code><a href="../reference/grim_map.html">grim_map()</a></code>.</p></li>
<li><p>Testing sequences of means or proportions.</p></li>
<li><p>The <code><a href="../reference/audit.html">audit()</a></code> method for summarizing
<code><a href="../reference/grim_map.html">grim_map()</a></code>’s results.</p></li>
<li><p>The visualization function <code><a href="../reference/grim_plot.html">grim_plot()</a></code>.</p></li>
<li><p>Statistical benchmarks, such as granularity and the probability
of GRIM inconsistency.</p></li>
</ol>
<div class="section level3">
<h3 id="basic-grim-testing">Basic GRIM testing<a class="anchor" aria-label="anchor" href="#basic-grim-testing"></a>
</h3>
<div class="section level4">
<h4 id="few-cases-grim">Few cases: <code>grim()</code><a class="anchor" aria-label="anchor" href="#few-cases-grim"></a>
</h4>
<p>To test if a reported mean of 5.27 on a granular scale is
GRIM-consistent with a sample size of 43, run this:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/grim.html">grim</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"5.27"</span>, n <span class="op">=</span> <span class="fl">43</span><span class="op">)</span></span>
<span><span class="co">#&gt;  5.27 </span></span>
<span><span class="co">#&gt; FALSE</span></span></code></pre></div>
<p>Note that <code>x</code>, the reported mean, needs to be a string.
The reason is that strings preserve trailing zeros, which can be crucial
for GRIM-testing. Numeric values don’t, and even converting them to
strings won’t help. A workaround for larger numbers of such values,
<code><a href="../reference/restore_zeros.html">restore_zeros()</a></code>, is discussed in
<code><a href="../articles/wrangling.html">vignette("wrangling")</a></code>.</p>
<p><code><a href="../reference/grim.html">grim()</a></code> has some further parameters, but all of them can
be used from within <code><a href="../reference/grim_map.html">grim_map()</a></code>. The other parameters will
be discussed in that context because <code><a href="../reference/grim_map.html">grim_map()</a></code> is often
the more useful function in practice. Furthermore, although
<code><a href="../reference/grim.html">grim()</a></code> is vectorized, <code><a href="../reference/grim_map.html">grim_map()</a></code> is more safe
and convenient for testing multiple combinations of means/proportions
and sample sizes.</p>
</div>
<div class="section level4">
<h4 id="many-cases-grim_map">Many cases: <code>grim_map()</code><a class="anchor" aria-label="anchor" href="#many-cases-grim_map"></a>
</h4>
<p>If you want to GRIM-test more than a handful of cases, the
recommended way is to enter them into a data frame and to run
<code><a href="../reference/grim_map.html">grim_map()</a></code> on the data frame. Two different ways to do that
are discussed in <code><a href="../articles/wrangling.html">vignette("wrangling")</a></code>, but here, I will
only describe an easily accessible solution for a single table.</p>
<p>Copy summary data from a PDF file and paste them into
<code><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tibble::tribble()</a></code>, which is available via scrutiny:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">flying_pigs1</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">x</span>,</span>
<span><span class="st">"8.97"</span>,</span>
<span><span class="st">"2.61"</span>,</span>
<span><span class="st">"7.26"</span>,</span>
<span><span class="st">"3.64"</span>,</span>
<span><span class="st">"9.26"</span>,</span>
<span><span class="st">"10.46"</span>,</span>
<span><span class="st">"7.39"</span></span>
<span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">28</span><span class="op">)</span></span></code></pre></div>
<p>Use RStudio’s multiple cursors to draw quotation marks around all the
<code>x</code> values, and to set commas at the end. See
<code><a href="../articles/wrangling.html">vignette("wrangling")</a></code>, section <em>With copy and
paste</em>, if you are not sure how to do that.</p>
<p>Now, simply run <code><a href="../reference/grim_map.html">grim_map()</a></code> on that data frame:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/grim_map.html">grim_map</a></span><span class="op">(</span><span class="va">flying_pigs1</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 7 × 4</span></span></span>
<span><span class="co">#&gt;   x         n consistency probability</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 8.97     28 FALSE              0.72</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2.61     28 TRUE               0.72</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 7.26     28 FALSE              0.72</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 3.64     28 TRUE               0.72</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 9.26     28 FALSE              0.72</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 10.46    28 TRUE               0.72</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> 7.39     28 TRUE               0.72</span></span></code></pre></div>
<p>The <code>x</code> and <code>n</code> columns are the same as in the
input. By default, the number of <code>items</code> composing the mean
is assumed to be 1. The main result, <code>consistency</code>, is the
GRIM consistency of the former three columns. On the
<code>probability</code> column, see section <em>The probability of GRIM
inconsistency</em>.</p>
</div>
<div class="section level4">
<h4 id="scale-items">Scale items<a class="anchor" aria-label="anchor" href="#scale-items"></a>
</h4>
<p>If a mean is composed of multiple items, set the <code>items</code>
parameter to that number. Below are hypothetical means of a three-items
scale. With the single-item default, half of these are wrongly flagged
as inconsistent:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">jpap_1</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>   <span class="op">~</span><span class="va">x</span>,</span>
<span>  <span class="st">"5.90"</span>,</span>
<span>  <span class="st">"5.71"</span>,</span>
<span>  <span class="st">"3.50"</span>,</span>
<span>  <span class="st">"3.82"</span>,</span>
<span>  <span class="st">"4.61"</span>,</span>
<span>  <span class="st">"5.24"</span>,</span>
<span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">40</span><span class="op">)</span></span>
<span></span>
<span><span class="va">jpap_1</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/grim_map.html">grim_map</a></span><span class="op">(</span><span class="op">)</span>  <span class="co"># default is wrong here!</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 4</span></span></span>
<span><span class="co">#&gt;   x         n consistency probability</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 5.90     40 TRUE                0.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 5.71     40 FALSE               0.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 3.50     40 TRUE                0.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 3.82     40 TRUE                0.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 4.61     40 FALSE               0.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 5.24     40 FALSE               0.6</span></span></code></pre></div>
<p>Yet, all of them are consistent if the correct number of items is
stated:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">jpap_1</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/grim_map.html">grim_map</a></span><span class="op">(</span>items <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 4</span></span></span>
<span><span class="co">#&gt;   x         n consistency probability</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 5.90    120 TRUE                  0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 5.71    120 TRUE                  0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 3.50    120 TRUE                  0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 3.82    120 TRUE                  0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 4.61    120 TRUE                  0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 5.24    120 TRUE                  0</span></span></code></pre></div>
<p>It is also possible to include an <code>items</code> column in the
data frame instead:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">jpap_2</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>   <span class="op">~</span><span class="va">x</span>,    <span class="op">~</span><span class="va">items</span>,</span>
<span>  <span class="st">"6.92"</span>,  <span class="fl">1</span>,</span>
<span>  <span class="st">"3.48"</span>,  <span class="fl">1</span>,</span>
<span>  <span class="st">"1.59"</span>,  <span class="fl">2</span>,</span>
<span>  <span class="st">"2.61"</span>,  <span class="fl">2</span>,</span>
<span>  <span class="st">"4.04"</span>,  <span class="fl">3</span>,</span>
<span>  <span class="st">"4.50"</span>,  <span class="fl">3</span>,</span>
<span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>n <span class="op">=</span> <span class="fl">30</span><span class="op">)</span></span>
<span></span>
<span><span class="va">jpap_2</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/grim_map.html">grim_map</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 4</span></span></span>
<span><span class="co">#&gt;   x         n consistency probability</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 6.92     30 FALSE               0.7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 3.48     30 FALSE               0.7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 1.59     60 FALSE               0.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2.61     60 FALSE               0.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 4.04     90 TRUE                0.1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 4.50     90 TRUE                0.1</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="percentage-conversion">Percentage conversion<a class="anchor" aria-label="anchor" href="#percentage-conversion"></a>
</h4>
<p>An underappreciated strength of GRIM is testing percentages. Since
these are actually decimal numbers inflated by a factor of 100,
percentages come with two “free” decimal places. However, percentages
are often reported with decimal places beyond those two, which increases
the probability of GRIM-inconsistencies unless true values were
correctly reported.</p>
<p>Both <code><a href="../reference/grim.html">grim()</a></code> and <code><a href="../reference/grim_map.html">grim_map()</a></code> have a
<code>percent</code> parameter which, if set to <code>TRUE</code>,
divides the <code>x</code> values by 100 and increases the decimal count
by two, so that percentages can be tested just like means:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">jpap_3</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">x</span>,     <span class="op">~</span><span class="va">n</span>,</span>
<span>  <span class="st">"32.5"</span>,  <span class="fl">438</span>,</span>
<span>  <span class="st">"35.6"</span>,  <span class="fl">455</span>,</span>
<span>  <span class="st">"21.7"</span>,  <span class="fl">501</span>,</span>
<span>  <span class="st">"39.3"</span>,  <span class="fl">516</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">jpap_3</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/grim_map.html">grim_map</a></span><span class="op">(</span>percent <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> `x` converted from percentage</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 4</span></span></span>
<span><span class="co">#&gt;   x         n consistency probability</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 0.325   438 FALSE             0.562</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 0.356   455 TRUE              0.545</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 0.217   501 FALSE             0.499</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 0.393   516 TRUE              0.484</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="reconstructed-values">Reconstructed values<a class="anchor" aria-label="anchor" href="#reconstructed-values"></a>
</h4>
<p>Set <code>show_rec</code> to <code>TRUE</code> if you want the values
that were reconstructed during GRIM-testing to be displayed in the
output. They will be columns prefixed with <code>rec_</code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pigs1</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/grim_map.html">grim_map</a></span><span class="op">(</span>show_rec <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fl">4</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span>   <span class="co"># output cut down for printing</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 12 × 5</span></span></span>
<span><span class="co">#&gt;    probability rec_sum rec_x_upper rec_x_lower rec_x_upper_rounded_up</span></span>
<span><span class="co">#&gt;          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>        0.68  231.         7.25        7.22                    7.25</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>        0.75  118.         4.76        4.72                    4.76</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>        0.71  152.         5.24        5.21                    5.24</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>        0.76   61.7        2.58        2.54                    2.58</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>        0.73  183.         6.78        6.74                    6.78</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>        0.72   75.0        2.71        2.68                    2.71</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>        0.71  203.         7.03        7.00                    7.03</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>        0.74  192.         7.38        7.35                    7.38</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>        0.73   84.8        3.15        3.11                    3.15</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        0.69  214.         6.90        6.87                    6.9 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>        0.75  125          5.00        5.00                    5   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span>        0.72    6.72       0.250       0.214                   0.25</span></span></code></pre></div>
<p>The additional columns are —</p>
<ul>
<li><p><code>rec_sum</code>: the sum total from which the mean or
proportion was ostensibly derived.</p></li>
<li><p><code>rec_x_upper</code>: the upper reconstructed <code>x</code>
value.</p></li>
<li><p><code>rec_x_lower</code>: the lower reconstructed <code>x</code>
value.</p></li>
<li><p><code>rec_x_upper_rounded_up</code>: the <code>rec_x_upper</code>
value rounded up.</p></li>
<li><p><code>rec_x_upper_rounded_down</code>: the
<code>rec_x_upper</code> value rounded down.</p></li>
<li><p><code>rec_x_lower_rounded_up</code>: the <code>rec_x_lower</code>
value rounded up.</p></li>
<li><p><code>rec_x_lower_rounded_down</code>: the
<code>rec_x_lower</code> value rounded down.</p></li>
</ul>
<p>The last four columns depend on <code>rounding</code>. Here, they
follow the default <code>"up_or_down"</code>, leading to two columns for
each of <code>rec_x_upper</code> and <code>rec_x_lower</code>. With a
singular <code>rounding</code> procedure, such as <code>"up"</code>,
there would only be one column each, and thus, two in total. The
difference between these numbers is not greatly important, however,
because rounding up and down mostly delivers the same results.</p>
<p>Internally, GRIM-consistency is determined by whether or not a stated
<code>x</code> value is near-identical to either
<code>rec_x_upper_rounded</code> or <code>rec_x_lower_rounded</code>.
This algorithm follows the charitable and conservative protocol outlined
by Brown and Heathers (2017). The <code>rec_*</code> columns were
inspired by <span class="citation">Bauer and Francis (2021)</span>’s
Table 1 but present values in slightly different ways.</p>
</div>
</div>
<div class="section level3">
<h3 id="summarizing-results-with-audit">Summarizing results with <code>audit()</code><a class="anchor" aria-label="anchor" href="#summarizing-results-with-audit"></a>
</h3>
<p>Following up on a call to <code><a href="../reference/grim_map.html">grim_map()</a></code>, the generic
function <code><a href="../reference/audit.html">audit()</a></code> summarizes GRIM test results:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">flying_pigs1</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/grim_map.html">grim_map</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/audit.html">audit</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>   <span class="co"># output cut down for printing</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 5</span></span></span>
<span><span class="co">#&gt;   incons_cases all_cases incons_rate mean_grim_prob incons_to_prob</span></span>
<span><span class="co">#&gt;          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>            3         7       0.429           0.72          0.595</span></span></code></pre></div>
<p>These columns are —</p>
<ol style="list-style-type: decimal">
<li><p><code>incons_cases</code>: number of GRIM-inconsistent value
sets.</p></li>
<li><p><code>all_cases</code>: total number of value sets.</p></li>
<li><p><code>incons_rate</code>: proportion of GRIM-inconsistent value
sets.</p></li>
<li><p><code>mean_grim_prob</code>: average probability of GRIM
inconsistency.</p></li>
<li><p><code>incons_to_prob</code>: ratio of <code>incons_rate</code> to
<code>mean_grim_prob</code>.</p></li>
<li><p><code>testable_cases</code>: number of GRIM-testable value sets
(i.e., those with a positive probability).</p></li>
<li><p><code>testable_rate</code>: proportion of GRIM-testable value
sets.</p></li>
</ol>
</div>
<div class="section level3">
<h3 id="visualizing-results-with-grim_plot">Visualizing results with <code>grim_plot()</code><a class="anchor" aria-label="anchor" href="#visualizing-results-with-grim_plot"></a>
</h3>
<p>There is a specialized visualization function for GRIM test results,
<code><a href="../reference/grim_plot.html">grim_plot()</a></code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">jpap_5</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">x</span>,        <span class="op">~</span><span class="va">n</span>,</span>
<span>  <span class="st">"7.19"</span>,    <span class="fl">28</span>,</span>
<span>  <span class="st">"4.56"</span>,    <span class="fl">34</span>,</span>
<span>  <span class="st">"0.42"</span>,    <span class="fl">27</span>,</span>
<span>  <span class="st">"1.31"</span>,    <span class="fl">25</span>,</span>
<span>  <span class="st">"3.48"</span>,    <span class="fl">34</span>,</span>
<span>  <span class="st">"4.27"</span>,    <span class="fl">29</span>,</span>
<span>  <span class="st">"6.21"</span>,    <span class="fl">30</span>,</span>
<span>  <span class="st">"3.11"</span>,    <span class="fl">18</span>,</span>
<span>  <span class="st">"5.39"</span>,    <span class="fl">36</span>,</span>
<span>  <span class="st">"5.66"</span>,    <span class="fl">18</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">jpap_5</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/grim_map.html">grim_map</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/grim_plot.html">grim_plot</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="grim_files/figure-html/unnamed-chunk-11-1.png" width="576"></p>
<p><code><a href="../reference/grim_plot.html">grim_plot()</a></code> can only be called on
<code><a href="../reference/grim_map.html">grim_map()</a></code>’s output. It will fail otherwise:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/grim_plot.html">grim_plot</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `grim_plot()`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> `grim_plot()` needs GRIM or GRIMMER test results.</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> `data` is not the output of `grim_map()`, `grim_map_seq()`, or</span></span>
<span><span class="co">#&gt;   `grim_map_total_n()`; or of the respective `grimmer_*()` functions.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> The only exception is an "empty" plot that shows the background raster but no</span></span>
<span><span class="co">#&gt;   empirical test results. Create such a plot with `show_data = FALSE`.</span></span></code></pre></div>
<p>With its unusual optics, this plot will probably not fit everyone’s
taste. The results of <code><a href="../reference/grim_plot.html">grim_plot()</a></code> are like those of error
detection in general: They are not pretty, but they put the unvarnished
truth on display.</p>
<p>The plot is strictly based on the laws governing GRIM. Its background
raster shows all consistent (light) and inconsistent (dark) value pairs
for two decimal places. Empirical values are shown in blue if consistent
and red if inconsistent. Color settings and other ggplot2-typical
options are available via arguments. Read about them at
<code><a href="../reference/grim_plot.html">grim_plot()</a></code>’s documentation.</p>
<p>You might notice the light vertical lines at
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>=</mo><mn>40</mn></mrow><annotation encoding="application/x-tex">n = 40</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>=</mo><mn>80</mn></mrow><annotation encoding="application/x-tex">n = 80</annotation></semantics></math>:
Few values are flagged as inconsistent here. This reflects
<code><a href="../reference/grim_map.html">grim_map()</a></code>’s charitable default of accepting values rounded
either up <em>or</em> down from 5. If a different <code>rounding</code>
specification is chosen in the <code><a href="../reference/grim_map.html">grim_map()</a></code> call, the plot
raster will adjust automatically (although it will often be the same as
before):</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">jpap_5</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/grim_map.html">grim_map</a></span><span class="op">(</span>rounding <span class="op">=</span> <span class="st">"ceiling"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/grim_plot.html">grim_plot</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="grim_files/figure-html/unnamed-chunk-13-1.png" width="576"></p>
<p>All <code>rounding</code> values other than <code>up_from</code>,
<code>down_from</code>, and <code>up_from_or_down_from</code> are
supported.</p>
<p>Speed is not much of a concern here because all the rasters are based
on data already stored within the package (in <a href="https://github.com/lhdjung/scrutiny/blob/main/R/sysdata.rda" class="external-link">R/sysdata.rda</a>),
so they don’t need to be generated on the spot every time the function
is called. See R/data-gen.R for the way they were generated.</p>
</div>
<div class="section level3">
<h3 id="testing-numeric-sequences-with-grim_map_seq">Testing numeric sequences with <code>grim_map_seq()</code><a class="anchor" aria-label="anchor" href="#testing-numeric-sequences-with-grim_map_seq"></a>
</h3>
<p>GRIM analysts might be interested in a mean or percentage value’s
numeric neighborhood. Suppose you found multiple GRIM inconsistencies as
in out example <code>pigs1</code> data. You might wonder whether they
are due to small reporting or computing errors.</p>
<p>Use <code><a href="../reference/grim_map_seq.html">grim_map_seq()</a></code> to GRIM-test the values surrounding
the reported means and sample sizes:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out_seq1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/grim_map_seq.html">grim_map_seq</a></span><span class="op">(</span><span class="va">pigs1</span><span class="op">)</span></span>
<span><span class="va">out_seq1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 160 × 7</span></span></span>
<span><span class="co">#&gt;    x         n consistency probability diff_var  case var  </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 4.69     25 FALSE              0.75       -<span style="color: #BB0000;">5</span>     1 x    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 4.70     25 FALSE              0.75       -<span style="color: #BB0000;">4</span>     1 x    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 4.71     25 FALSE              0.75       -<span style="color: #BB0000;">3</span>     1 x    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 4.72     25 TRUE               0.75       -<span style="color: #BB0000;">2</span>     1 x    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 4.73     25 FALSE              0.75       -<span style="color: #BB0000;">1</span>     1 x    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 4.75     25 FALSE              0.75        1     1 x    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 4.76     25 TRUE               0.75        2     1 x    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 4.77     25 FALSE              0.75        3     1 x    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 4.78     25 FALSE              0.75        4     1 x    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 4.79     25 FALSE              0.75        5     1 x    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 150 more rows</span></span></span></code></pre></div>
<div class="section level4">
<h4 id="summaries-with-audit_seq">Summaries with <code>audit_seq()</code><a class="anchor" aria-label="anchor" href="#summaries-with-audit_seq"></a>
</h4>
<p>As this output is a little unwieldy, run <code><a href="../reference/audit-special.html">audit_seq()</a></code> on
the results:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/audit-special.html">audit_seq</a></span><span class="op">(</span><span class="va">out_seq1</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 8 × 12</span></span></span>
<span><span class="co">#&gt;   x         n consistency hits_total hits_x hits_n diff_x diff_x_up diff_x_down</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 4.74     25 FALSE                4      2      2      2         2          -<span style="color: #BB0000;">2</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 5.23     29 FALSE                6      3      3      1         1          -<span style="color: #BB0000;">2</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2.57     24 FALSE                6      3      3      1         1          -<span style="color: #BB0000;">3</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 6.77     27 FALSE                7      3      4      1         1          -<span style="color: #BB0000;">3</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 7.01     29 FALSE                3      3      0      1         2          -<span style="color: #BB0000;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 3.14     27 FALSE                6      3      3      1         1          -<span style="color: #BB0000;">3</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> 6.89     31 FALSE                8      4      4      1         1          -<span style="color: #BB0000;">2</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span> 0.24     28 FALSE                6      3      3      1         1          -<span style="color: #BB0000;">3</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: diff_n &lt;int&gt;, diff_n_up &lt;int&gt;, diff_n_down &lt;int&gt;</span></span></span></code></pre></div>
<p>Here is what the output columns mean:</p>
<ul>
<li><p><code>x</code> and <code>n</code> are the original inputs,
reconstructed and tested for <code>consistency</code> here.</p></li>
<li><p><code>hits</code> is the number of GRIM-consistent value
combinations found within the specified <code>dispersion</code>
range.</p></li>
<li><p><code>diff_x</code> reports the absolute difference between
<code>x</code> and the next consistent dispersed value (in dispersion
steps, not the actual numeric difference). <code>diff_x_up</code> and
<code>diff_x_down</code> report the difference to the next higher or
lower consistent value, respectively.</p></li>
<li><p><code>diff_n</code>, <code>diff_n_up</code>, and
<code>diff_n_down</code> do the same for <code>n</code>.</p></li>
</ul>
<p>The default for <code>dispersion</code> is <code>1:5</code>, for five
steps up and down. When the <code>dispersion</code> sequence gets
longer, the number of hits tends to increase:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out_seq2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/grim_map_seq.html">grim_map_seq</a></span><span class="op">(</span><span class="va">pigs1</span>, dispersion <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/audit-special.html">audit_seq</a></span><span class="op">(</span><span class="va">out_seq2</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 8 × 12</span></span></span>
<span><span class="co">#&gt;   x         n consistency hits_total hits_x hits_n diff_x diff_x_up diff_x_down</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 4.74     25 FALSE               12      6      6      2         2          -<span style="color: #BB0000;">2</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 5.23     29 FALSE               12      6      6      1         1          -<span style="color: #BB0000;">2</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2.57     24 FALSE               11      6      5      1         1          -<span style="color: #BB0000;">3</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 6.77     27 FALSE               11      6      5      1         1          -<span style="color: #BB0000;">3</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 7.01     29 FALSE                6      6      0      1         2          -<span style="color: #BB0000;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 3.14     27 FALSE               13      6      7      1         1          -<span style="color: #BB0000;">3</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> 6.89     31 FALSE               12      6      6      1         1          -<span style="color: #BB0000;">2</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span> 0.24     28 FALSE               13      6      7      1         1          -<span style="color: #BB0000;">3</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: diff_n &lt;int&gt;, diff_n_up &lt;int&gt;, diff_n_down &lt;int&gt;</span></span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="visualizing-grim-tested-sequences">Visualizing GRIM-tested sequences<a class="anchor" aria-label="anchor" href="#visualizing-grim-tested-sequences"></a>
</h4>
<p>It’s curious what happens when we plot the output of
<code><a href="../reference/grim_map_seq.html">grim_map_seq()</a></code>. Like regular GRIM plots, however, it does
give us a sense of how many tested values are consistent:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/grim_plot.html">grim_plot</a></span><span class="op">(</span><span class="va">out_seq1</span><span class="op">)</span></span></code></pre></div>
<p><img src="grim_files/figure-html/unnamed-chunk-17-1.png" width="576"></p>
<p>The crosses appear because <code><a href="../reference/grim_map_seq.html">grim_map_seq()</a></code> creates
sequences around both <code>x</code> and <code>n</code>. Restrict this
process to any one of these with the <code>var</code> argument:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out_seq1_only_x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/grim_map_seq.html">grim_map_seq</a></span><span class="op">(</span><span class="va">pigs1</span>, var <span class="op">=</span> <span class="st">"x"</span><span class="op">)</span></span>
<span><span class="va">out_seq1_only_n</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/grim_map_seq.html">grim_map_seq</a></span><span class="op">(</span><span class="va">pigs1</span>, var <span class="op">=</span> <span class="st">"n"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/grim_plot.html">grim_plot</a></span><span class="op">(</span><span class="va">out_seq1_only_x</span><span class="op">)</span></span></code></pre></div>
<p><img src="grim_files/figure-html/unnamed-chunk-18-1.png" width="576"></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/grim_plot.html">grim_plot</a></span><span class="op">(</span><span class="va">out_seq1_only_n</span><span class="op">)</span></span></code></pre></div>
<p><img src="grim_files/figure-html/unnamed-chunk-18-2.png" width="576"></p>
</div>
</div>
<div class="section level3">
<h3 id="handling-unknown-group-sizes-with-grim_map_total_n">Handling unknown group sizes with
<code>grim_map_total_n()</code><a class="anchor" aria-label="anchor" href="#handling-unknown-group-sizes-with-grim_map_total_n"></a>
</h3>
<div class="section level4">
<h4 id="problems-from-underreporting">Problems from underreporting<a class="anchor" aria-label="anchor" href="#problems-from-underreporting"></a>
</h4>
<p>Unfortunately, some studies that report group averages don’t report
the corresponding group sizes — only a total sample size. This makes any
direct GRIM-testing impossible because only <code>x</code> values are
known, not <code>n</code> values. All that is feasible here in terms of
GRIM is to take a number around half the total sample size, go up and
down from it, and check which <em>hypothetical</em> group sizes are
consistent with the reported group means.
<code><a href="../reference/grim_map_total_n.html">grim_map_total_n()</a></code> semi-automates this process, motivated
by a recent GRIM analysis <span class="citation">(Bauer and Francis
2021)</span>.</p>
<p>The study examined by <span class="citation">Bauer and Francis
(2021)</span> reported means of 5.3 and 4.71 for a total sample size of
40. With equal group sizes (i.e., 20 in each group), only 5.3 is
GRIM-consistent, not 4.71. However, Bauer and Francis looked for a
plausible scenario in which both means were consistent. They checked if
those scenarios came about if the 40 participants were distributed
across the two groups in slightly different ways.</p>
<p>More precisely, they went from a 20/20 group split to a 19/21 split,
then to an 18/22 split, and finally to a 17/23 split. In the latter
scenario, both means are consistent if 17 is paired with 4.71 and 23
with 5.3.</p>
</div>
<div class="section level4">
<h4 id="semi-automated-solution">Semi-automated solution<a class="anchor" aria-label="anchor" href="#semi-automated-solution"></a>
</h4>
<p>Instead of going about this manually, call
<code><a href="../reference/grim_map_total_n.html">grim_map_total_n()</a></code>, followed by
<code><a href="../reference/audit-special.html">audit_total_n()</a></code> for summarizing the results. It will find
two further plausible scenarios in which both means are consistent; more
on that below.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>x1 <span class="op">=</span> <span class="st">"4.71"</span>, x2 <span class="op">=</span> <span class="st">"5.3"</span>, n <span class="op">=</span> <span class="fl">40</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Detailed results:</span></span>
<span><span class="va">df_tested</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/grim_map_total_n.html">grim_map_total_n</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="va">df_tested</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 24 × 8</span></span></span>
<span><span class="co">#&gt;    x         n n_change consistency both_consistent probability  case dir  </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 4.71     20        0 FALSE       FALSE                  0.8      1 forth</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 5.3      20        0 TRUE        FALSE                  0        1 forth</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 4.71     19       -<span style="color: #BB0000;">1</span> FALSE       FALSE                  0.81     1 forth</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 5.3      21        1 TRUE        FALSE                  0        1 forth</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 4.71     18       -<span style="color: #BB0000;">2</span> FALSE       FALSE                  0.82     1 forth</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 5.3      22        2 TRUE        FALSE                  0        1 forth</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 4.71     17       -<span style="color: #BB0000;">3</span> TRUE        TRUE                   0.83     1 forth</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 5.3      23        3 TRUE        TRUE                   0        1 forth</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 4.71     16       -<span style="color: #BB0000;">4</span> FALSE       FALSE                  0.84     1 forth</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 5.3      24        4 TRUE        FALSE                  0        1 forth</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 14 more rows</span></span></span>
<span></span>
<span><span class="co"># Summary:</span></span>
<span><span class="fu"><a href="../reference/audit-special.html">audit_total_n</a></span><span class="op">(</span><span class="va">df_tested</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 8</span></span></span>
<span><span class="co">#&gt;   x1    x2        n hits_total hits_forth hits_back scenarios_total hit_rate</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 4.71  5.3      40          3          1         2              12     0.25</span></span></code></pre></div>
<p>Each “hit” is a scenario in which both <code>x1</code> and
<code>x2</code> are GRIM-consistent with one of the two hypothetical
group sizes. By default (<code>dispersion = 0:5</code>), the function
goes five steps up and down from <code>n</code>.</p>
</div>
<div class="section level4">
<h4 id="testing-both-ways">Testing both ways<a class="anchor" aria-label="anchor" href="#testing-both-ways"></a>
</h4>
<p><span class="citation">Bauer and Francis (2021)</span> only took
those scenarios into account in which 4.71 was combined with the
respective smaller group and 5.3 with the larger one, so 17/23 is the
only “hit” they found (my term). However, the converse way of assigning
hypothetical group sizes to the reported means would be equally
justified. <code><a href="../reference/grim_map_total_n.html">grim_map_total_n()</a></code>, therefore, conducts two sets
of GRIM tests: one for each way of pairing means and group sizes.</p>
<p>It thus finds the group sizes 19/21 and 16/24 to be GRIM-consistent
if 5.3 is combined with the smaller group and 4.71 with the larger one
(i.e., with pairing reversed from Bauer and Francis’ analysis). In the
<code><a href="../reference/audit-special.html">audit_total_n()</a></code> summary of the function’s output, results
from original pairing are named <code>hits_forth</code>, those from
reversed pairing are named <code>hits_back</code>, and their sum is
named <code>hits_total</code>.</p>
<p>This example only features one case — the <code>df</code> tibble has
just a single row. It could have any number of rows, though; and
<code><a href="../reference/grim_map_total_n.html">grim_map_total_n()</a></code> would determine and count the “hits” for
each of them. See the <em>Examples</em> section of
<code><a href="../reference/grim_map_total_n.html">grim_map_total_n()</a></code>’s documentation.</p>
</div>
</div>
<div class="section level3">
<h3 id="grim-statistics">GRIM statistics<a class="anchor" aria-label="anchor" href="#grim-statistics"></a>
</h3>
<div class="section level4">
<h4 id="the-probability-of-grim-inconsistency">The probability of GRIM inconsistency<a class="anchor" aria-label="anchor" href="#the-probability-of-grim-inconsistency"></a>
</h4>
<div class="section level5">
<h5 id="general-description">General description<a class="anchor" aria-label="anchor" href="#general-description"></a>
</h5>
<p>The <code>probability</code> column in a tibble returned by
<code><a href="../reference/grim_map.html">grim_map()</a></code> is the probability of GRIM inconsistency,
i.e.:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo>,</mo><mfrac><mrow><msup><mn>10</mn><mi>D</mi></msup><mo>−</mo><mi>N</mi><mi>L</mi></mrow><msup><mn>10</mn><mi>D</mi></msup></mfrac><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">
P = max(0, \frac{10^D - NL}{10^D})
</annotation></semantics></math></p>
<p>where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>D</mi><annotation encoding="application/x-tex">D</annotation></semantics></math>
is the number of decimal places in
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>
(the mean or proportion),
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>N</mi><annotation encoding="application/x-tex">N</annotation></semantics></math>
is the sample size, and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>L</mi><annotation encoding="application/x-tex">L</annotation></semantics></math>
is the number of scale items. The fraction will never be greater than 1,
and the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mi>a</mi><mi>x</mi><mrow><mo stretchy="true" form="prefix">(</mo><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">max()</annotation></semantics></math>
function limits it at 0.</p>
<p>Consider a mean
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>
that was ostensibly derived from integer data. It has
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>D</mi><annotation encoding="application/x-tex">D</annotation></semantics></math>
decimal places, but is otherwise random: the integer part is irrelevant
in any case, and the exact digits that occupy the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>D</mi><annotation encoding="application/x-tex">D</annotation></semantics></math>
decimal places are ignored.
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>P</mi><annotation encoding="application/x-tex">P</annotation></semantics></math>,
then, is the probability that
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>
is GRIM-inconsistent. Naturally,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>P</mi><annotation encoding="application/x-tex">P</annotation></semantics></math>
is also the proportion of inconsistent value sets with
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>D</mi><annotation encoding="application/x-tex">D</annotation></semantics></math>
decimal places, a sample size of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>N</mi><annotation encoding="application/x-tex">N</annotation></semantics></math>,
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>L</mi><annotation encoding="application/x-tex">L</annotation></semantics></math>
scale items.</p>
<p>In real-world scenarios, one would not usually assume
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>
to be random at the outset of an investigation, but this can be
interesting as a contrasting assumption. If a study has many
GRIM-inconsistent value sets with very high probabilities of
inconsistency, it may suggest that the anomalies are not explained by
small deviations from true values (although <code><a href="../reference/grim_map_seq.html">grim_map_seq()</a></code>
is more informative on this point). Rather, such a finding could raise
concerns that these statistics did not come about as part of a regular
research process.</p>
</div>
<div class="section level5">
<h5 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a>
</h5>
<p><code><a href="../reference/grim-stats.html">grim_probability()</a></code> takes the arguments <code>x</code>,
<code>n</code>, <code>items</code>, and <code>percent</code> as in
<code><a href="../reference/grim.html">grim()</a></code> and <code><a href="../reference/grim_map.html">grim_map()</a></code>. As before,
<code>x</code> must be a string to capture any trailing zeros:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/grim-stats.html">grim_probability</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"1.40"</span>, n <span class="op">=</span> <span class="fl">72</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.28</span></span>
<span></span>
<span><span class="fu"><a href="../reference/grim-stats.html">grim_probability</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"5.93"</span>, n <span class="op">=</span> <span class="fl">80</span>, items <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0</span></span>
<span></span>
<span><span class="co"># Enter `x` as a string to preserve trailing zeros:</span></span>
<span><span class="fu"><a href="../reference/grim-stats.html">grim_probability</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"84.27"</span>, n <span class="op">=</span> <span class="fl">40</span>, percent <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.996</span></span></code></pre></div>
<p><code><a href="../reference/grim_map.html">grim_map()</a></code> displays a <code>probability</code> column
that shows the probability of GRIM inconsistency. It is derived using
<code><a href="../reference/grim-stats.html">grim_probability()</a></code>.</p>
<p>In addition, <code><a href="../reference/grim-stats.html">grim_total()</a></code> takes the same arguments but
returns only the numerator of the fraction in the above formula:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/grim-stats.html">grim_total</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"1.40"</span>, n <span class="op">=</span> <span class="fl">72</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 28</span></span>
<span></span>
<span><span class="fu"><a href="../reference/grim-stats.html">grim_total</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"5.93"</span>, n <span class="op">=</span> <span class="fl">80</span>, items <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] -140</span></span>
<span></span>
<span><span class="fu"><a href="../reference/grim-stats.html">grim_total</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"84.27"</span>, n <span class="op">=</span> <span class="fl">40</span>, percent <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>  <span class="co"># Enter `x` as string to preserve trailing zero</span></span>
<span><span class="co">#&gt; [1] 9960</span></span></code></pre></div>
<p>The result is the total number of GRIM-inconsistent value sets with
the given parameters. However, this is generally less useful than
<code><a href="../reference/grim-stats.html">grim_probability()</a></code>: the result is only comparable across
different numbers of decimal places when normalized by
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mn>10</mn><mi>D</mi></msup><annotation encoding="application/x-tex">10^D</annotation></semantics></math>.</p>
</div>
<div class="section level5">
<h5 id="origins">Origins<a class="anchor" aria-label="anchor" href="#origins"></a>
</h5>
<p>The formula for the probability of GRIM inconsistency is arguably
implicit in Brown and Heathers’ (2017) paper on GRIM. The numerator is a
transformation of the formula presented on p. 364, and the authors
discuss a common special case of the probability (interpreted as a
proportion) on p. 367:</p>
<blockquote>
<p>With reporting to two decimal places, for a sample size
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>&lt;</mo><mn>100</mn></mrow><annotation encoding="application/x-tex">N &lt; 100</annotation></semantics></math>
[and a single item], a random mean value will be consistent in
approximately
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>N</mi><annotation encoding="application/x-tex">N</annotation></semantics></math>%
of cases.</p>
</blockquote>
<p>Assuming
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mn>70</mn></mrow><annotation encoding="application/x-tex">N = 70</annotation></semantics></math>
and inserting all of these values into the above formula returns</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mi>a</mi><mi>x</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo>,</mo><mfrac><mrow><msup><mn>10</mn><mn>2</mn></msup><mo>−</mo><mn>70</mn><mo>×</mo><mn>1</mn></mrow><msup><mn>10</mn><mn>2</mn></msup></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mn>0.3</mn></mrow><annotation encoding="application/x-tex">
max(0, \frac{10^2-70×1}{10^2}) = 0.3
</annotation></semantics></math></p>
<p>so that a random mean will be inconsistent in about 30% of cases and,
conversely, consistent in about 70%.</p>
<p>Here is the same in code (assuming an arbitrary mean with two decimal
places):</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/grim-stats.html">grim_probability</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"0.99"</span>, n <span class="op">=</span> <span class="fl">70</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.3</span></span></code></pre></div>
</div>
</div>
<div class="section level4">
<h4 id="granularity-and-scale-items">Granularity and scale items<a class="anchor" aria-label="anchor" href="#granularity-and-scale-items"></a>
</h4>
<p>The granularity of a non-continuous distribution is the minimal
amount by which two means or proportions of the distribution can differ.
It is derived from the sample size and the number of scale items. The
number of items, in turn, naturally follows from the distribution’s
sample size and granularity.</p>
<div class="section level5">
<h5 id="formulas">Formulas<a class="anchor" aria-label="anchor" href="#formulas"></a>
</h5>
<p>The granularity
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>G</mi><annotation encoding="application/x-tex">G</annotation></semantics></math>)
formula is</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mi>N</mi><mi>L</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">
G = \frac{1}{NL}
</annotation></semantics></math></p>
<p>where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>N</mi><annotation encoding="application/x-tex">N</annotation></semantics></math>
is the sample size and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>L</mi><annotation encoding="application/x-tex">L</annotation></semantics></math>
is the number of items.</p>
<p>The scale items formula is the converse:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mi>N</mi><mi>G</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">
L = \frac{1}{NG}
</annotation></semantics></math></p>
</div>
<div class="section level5">
<h5 id="functions-1">Functions<a class="anchor" aria-label="anchor" href="#functions-1"></a>
</h5>
<p>Suppose you have an ordinal distribution with 80 observations and
five items. To get its granularity, run this:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/grim_granularity.html">grim_granularity</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">80</span>, items <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.003125</span></span></code></pre></div>
<p>Now, imagine a distribution with 50 observations and a granularity of
0.01. To get the number of its items (actual or effective), use this
code:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/grim_granularity.html">grim_items</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">50</span>, gran <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 2</span></span></code></pre></div>
<p>As the number of items itself has a granularity of 1, a call to
<code><a href="../reference/grim_granularity.html">grim_items()</a></code> that doesn’t return whole numbers indicates a
problem in earlier computations. A warning to that effect will be
displayed:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/grim_granularity.html">grim_items</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">65</span>, <span class="fl">93</span><span class="op">)</span>, gran <span class="op">=</span> <span class="fl">0.02</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: 2 out of 3 item counts aren't whole numbers.</span></span>
<span><span class="co">#&gt; → This concerns `0.769` and `0.538`.</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> Item counts have a granularity of 1, so they should be whole numbers. Are you</span></span>
<span><span class="co">#&gt;   sure about the `n` and `gran` values?</span></span>
<span><span class="co">#&gt; [1] 1.0000000 0.7692308 0.5376344</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-bauer_expression_2021" class="csl-entry">
Bauer, Patricia J., and Gregory Francis. 2021. <span>“Expression of
<span>Concern</span>: <span>Is</span> <span>It</span> <span>Light</span>
or <span>Dark</span>? <span>Recalling</span> <span>Moral</span>
<span>Behavior</span> <span>Changes</span> <span>Perception</span> of
<span>Brightness</span>.”</span> <em>Psychological Science</em> 32 (12):
2042–43.
</div>
<div id="ref-brown_grim_2017" class="csl-entry">
Brown, Nicholas J. L., and James A. J. Heathers. 2017. <span>“The
<span>GRIM</span> <span>Test</span>: <span>A</span> <span>Simple</span>
<span>Technique</span> <span>Detects</span> <span>Numerous</span>
<span>Anomalies</span> in the <span>Reporting</span> of
<span>Results</span> in <span>Psychology</span>.”</span> <em>Social
Psychological and Personality Science</em> 8 (4): 363–69.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lukas Jung.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
