<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Implementing your consistency test • scrutiny</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Implementing your consistency test">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">scrutiny</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Consistency tests</h6></li>
    <li><a class="dropdown-item" href="../articles/grim.html">GRIM</a></li>
    <li><a class="dropdown-item" href="../articles/grimmer.html">GRIMMER</a></li>
    <li><a class="dropdown-item" href="../articles/debit.html">DEBIT</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Plausibility checks</h6></li>
    <li><a class="dropdown-item" href="../articles/duplicates.html">Duplication analysis</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Quick guides</h6></li>
    <li><a class="dropdown-item" href="../articles/rounding-options.html">Rounding options</a></li>
    <li><a class="dropdown-item" href="../articles/consistency-tests-simple.html">Implementing your consistency test</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Developer tools</h6></li>
    <li><a class="dropdown-item" href="../articles/rounding-in-depth.html">Rounding in depth</a></li>
    <li><a class="dropdown-item" href="../articles/consistency-tests-in-depth.html">Consistency tests in depth</a></li>
    <li><a class="dropdown-item" href="../articles/devtools.html">Developer tools</a></li>
    <li><a class="dropdown-item" href="../articles/wrangling.html">Data wrangling</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Other</h6></li>
    <li><a class="dropdown-item" href="../articles/related.html">Related software</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/lhdjung/scrutiny/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Implementing your consistency test</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/lhdjung/scrutiny/blob/main/vignettes/consistency-tests-simple.Rmd" class="external-link"><code>vignettes/consistency-tests-simple.Rmd</code></a></small>
      <div class="d-none name"><code>consistency-tests-simple.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lhdjung.github.io/scrutiny/">scrutiny</a></span><span class="op">)</span></span></code></pre></div>
<p>Use scrutiny to implement new consistency tests in R. Consistency
tests, such as GRIM, are procedures that check whether two or more
summary values can describe the same data.</p>
<p>This vignette shows you the minimal steps required to tap into
scrutiny’s framework for implementing consistency tests. The key idea is
to focus on the core logic of your test and let scrutiny’s functions
take care of iteration. For an in-depth treatment, see
<code><a href="../articles/consistency-tests-in-depth.html">vignette("consistency-tests-in-depth")</a></code>.</p>
<div class="section level2">
<h2 id="single-case">1. Single-case<a class="anchor" aria-label="anchor" href="#single-case"></a>
</h2>
<p>Encode the logic of your test in a simple function that takes single
values. It should return <code>TRUE</code> if they are consistent and
<code>FALSE</code> if they are not. Its name should end on
<code>_scalar</code>, which refers to its single-case nature. Here, I
use a mock test without real meaning, called SCHLIM:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">schlim_scalar</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">y</span>, <span class="va">n</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span>
<span>  <span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="va">y</span> <span class="op">/</span> <span class="fl">3</span> <span class="op">&gt;</span> <span class="va">n</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">schlim_scalar</span><span class="op">(</span>y <span class="op">=</span> <span class="fl">30</span>, n <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu">schlim_scalar</span><span class="op">(</span>y <span class="op">=</span> <span class="fl">2</span>, n <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="vectorized">2. Vectorized<a class="anchor" aria-label="anchor" href="#vectorized"></a>
</h2>
<p>For completeness, although it’s not very important in practice —
<code><a href="https://rdrr.io/r/base/Vectorize.html" class="external-link">Vectorize()</a></code> from base R helps you turn the single-case
function into a vectorized one, so that the new function’s arguments can
have a length greater than 1:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">schlim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Vectorize.html" class="external-link">Vectorize</a></span><span class="op">(</span><span class="va">schlim_scalar</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">schlim</span><span class="op">(</span>y <span class="op">=</span> <span class="fl">10</span><span class="op">:</span><span class="fl">15</span>, n <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE FALSE FALSE  TRUE  TRUE  TRUE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="basic-mapper">3. Basic mapper<a class="anchor" aria-label="anchor" href="#basic-mapper"></a>
</h2>
<p>Next, create a function that tests many values in a data frame, like
<code><a href="../reference/grim_map.html">grim_map()</a></code> does. Its name should also end on
<code>_map</code>. Use <code><a href="../reference/function_map.html">function_map()</a></code> to get this function
without much effort:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">schlim_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/function_map.html">function_map</a></span><span class="op">(</span></span>
<span>  .fun <span class="op">=</span> <span class="va">schlim_scalar</span>,</span>
<span>  .reported <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y"</span>, <span class="st">"n"</span><span class="op">)</span>,</span>
<span>  .name_test <span class="op">=</span> <span class="st">"SCHLIM"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Example data:</span></span>
<span><span class="va">df1</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fl">16</span><span class="op">:</span><span class="fl">25</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">schlim_map</span><span class="op">(</span><span class="va">df1</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">#&gt;        y     n consistency</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>    16     3 TRUE       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>    17     4 TRUE       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>    18     5 TRUE       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>    19     6 TRUE       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>    20     7 FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>    21     8 FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>    22     9 FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>    23    10 FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>    24    11 FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>    25    12 FALSE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="audit-method">4. <code>audit()</code> method<a class="anchor" aria-label="anchor" href="#audit-method"></a>
</h2>
<p>Use scrutiny’s <code><a href="../reference/audit.html">audit()</a></code> generic to get summary
statistics. Write a new function named
<code>audit.scr_name_map()</code>, where <code>name</code> is the name
of your test in lower-case — here, <code>schlim</code>.</p>
<p>Within the function body, call <code><a href="../reference/audit_cols_minimal.html">audit_cols_minimal()</a></code>.
This enables you to use <code><a href="../reference/audit.html">audit()</a></code> following the mapper
function:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">audit.scr_schlim_map</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/audit_cols_minimal.html">audit_cols_minimal</a></span><span class="op">(</span><span class="va">data</span>, name_test <span class="op">=</span> <span class="st">"SCHLIM"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">df1</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">schlim_map</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/audit.html">audit</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 3</span></span></span>
<span><span class="co">#&gt;   incons_cases all_cases incons_rate</span></span>
<span><span class="co">#&gt;          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>            6        10         0.6</span></span></code></pre></div>
<p><code><a href="../reference/audit_cols_minimal.html">audit_cols_minimal()</a></code> only provides the most basic
summaries. If you like, you can still add summary statistics that are
more specific to your test. See, e.g., the <em>Summaries with
<code><a href="../reference/audit.html">audit()</a></code></em> section in <code><a href="../reference/grim_map.html">grim_map()</a></code>’s
documentation.</p>
</div>
<div class="section level2">
<h2 id="sequence-mapper">5. Sequence mapper<a class="anchor" aria-label="anchor" href="#sequence-mapper"></a>
</h2>
<p>This kind of mapper function tests hypothetical values around the
reported ones, like <code><a href="../reference/grim_map_seq.html">grim_map_seq()</a></code> does. Create a sequence
mapper by simply calling <code><a href="../reference/function_map_seq.html">function_map_seq()</a></code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">schlim_map_seq</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/function_map_seq.html">function_map_seq</a></span><span class="op">(</span></span>
<span>  .fun <span class="op">=</span> <span class="va">schlim_map</span>,</span>
<span>  .reported <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y"</span>, <span class="st">"n"</span><span class="op">)</span>,</span>
<span>  .name_test <span class="op">=</span> <span class="st">"SCHLIM"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">df1</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">schlim_map_seq</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 120 × 6</span></span></span>
<span><span class="co">#&gt;        y     n consistency diff_var  case var  </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>    15     7 FALSE             -<span style="color: #BB0000;">5</span>     1 y    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>    16     7 FALSE             -<span style="color: #BB0000;">4</span>     1 y    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>    17     7 FALSE             -<span style="color: #BB0000;">3</span>     1 y    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>    18     7 FALSE             -<span style="color: #BB0000;">2</span>     1 y    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>    19     7 FALSE             -<span style="color: #BB0000;">1</span>     1 y    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>    21     7 FALSE              1     1 y    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>    22     7 TRUE               2     1 y    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>    23     7 TRUE               3     1 y    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>    24     7 TRUE               4     1 y    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>    25     7 TRUE               5     1 y    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 110 more rows</span></span></span></code></pre></div>
<p>Get summary statistics with <code><a href="../reference/audit-special.html">audit_seq()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df1</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">schlim_map_seq</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/audit-special.html">audit_seq</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 12</span></span></span>
<span><span class="co">#&gt;       y     n consistency hits_total hits_y hits_n diff_y diff_y_up diff_y_down</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>    20     7 FALSE                9      4      5      2         2          <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>    21     8 FALSE                6      2      4      4         4          <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>    22     9 FALSE                4      0      4     <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>    23    10 FALSE                3      0      3     <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>    24    11 FALSE                2      0      2     <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>    25    12 FALSE                2      0      2     <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: diff_n &lt;int&gt;, diff_n_up &lt;int&gt;, diff_n_down &lt;int&gt;</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="total-n-mapper">6. Total-n mapper<a class="anchor" aria-label="anchor" href="#total-n-mapper"></a>
</h2>
<p>Suppose you have grouped data but no group sizes are known, only a
total sample size:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df2</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">y1</span>, <span class="op">~</span><span class="va">y2</span>, <span class="op">~</span><span class="va">n</span>,</span>
<span>   <span class="fl">84</span>,  <span class="fl">37</span>,  <span class="fl">29</span>,</span>
<span>   <span class="fl">61</span>,  <span class="fl">55</span>,  <span class="fl">26</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>To tackle this, create a total-n mapper that varies hypothetical
group sizes:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">schlim_map_total_n</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/function_map_total_n.html">function_map_total_n</a></span><span class="op">(</span></span>
<span>  .fun <span class="op">=</span> <span class="va">schlim_map</span>,</span>
<span>  .reported <span class="op">=</span> <span class="st">"y"</span>,</span>
<span>  .name_test <span class="op">=</span> <span class="st">"SCHLIM"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">df2</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">schlim_map_total_n</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 48 × 7</span></span></span>
<span><span class="co">#&gt;        y     n n_change consistency both_consistent  case dir  </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>    84    14        0 TRUE        FALSE               1 forth</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>    37    15        0 FALSE       FALSE               1 forth</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>    84    13       -<span style="color: #BB0000;">1</span> TRUE        FALSE               1 forth</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>    37    16        1 FALSE       FALSE               1 forth</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>    84    12       -<span style="color: #BB0000;">2</span> TRUE        FALSE               1 forth</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>    37    17        2 FALSE       FALSE               1 forth</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>    84    11       -<span style="color: #BB0000;">3</span> TRUE        FALSE               1 forth</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>    37    18        3 FALSE       FALSE               1 forth</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>    84    10       -<span style="color: #BB0000;">4</span> TRUE        FALSE               1 forth</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>    37    19        4 FALSE       FALSE               1 forth</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 38 more rows</span></span></span></code></pre></div>
<p>Get summary statistics with <code><a href="../reference/audit-special.html">audit_total_n()</a></code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df2</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">schlim_map_total_n</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/audit-special.html">audit_total_n</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 8</span></span></span>
<span><span class="co">#&gt;      y1    y2     n hits_total hits_forth hits_back scenarios_total hit_rate</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>    84    37    29          4          0         4              12    0.333</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>    61    55    26         12          6         6              12    1</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lukas Jung.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
