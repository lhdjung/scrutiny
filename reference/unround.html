<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Reconstruct rounding bounds — unround • scrutiny</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Reconstruct rounding bounds — unround" />
<meta property="og:description" content="unround() takes a rounded number and returns the range of the
original value: lower and upper bounds for the hypothetical earlier number
that was later rounded to the input number. It also displays a range with
inequation signs, showing whether the bounds are inclusive or not.
By default, the presumed rounding method is rounding up (or down) from 5.
See the Rounding section for other methods." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">scrutiny</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/debit.html">DEBIT</a>
    </li>
    <li>
      <a href="../articles/grim.html">GRIM</a>
    </li>
    <li>
      <a href="../articles/infrastructure.html">Infrastructure beyond rounding</a>
    </li>
    <li>
      <a href="../articles/rounding.html">Rounding</a>
    </li>
    <li>
      <a href="../articles/wrangling.html">Data wrangling</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/lhdjung/scrutiny/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Reconstruct rounding bounds</h1>
    <small class="dont-index">Source: <a href='https://github.com/lhdjung/scrutiny/blob/master/R/unround.R'><code>R/unround.R</code></a></small>
    <div class="hidden name"><code>unround.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>unround()</code> takes a rounded number and returns the range of the
original value: lower and upper bounds for the hypothetical earlier number
that was later rounded to the input number. It also displays a range with
inequation signs, showing whether the bounds are inclusive or not.</p>
<p>By default, the presumed rounding method is rounding up (or down) from 5.
See the <code>Rounding</code> section for other methods.</p>
    </div>

    <pre class="usage"><span class='fu'>unround</span><span class='op'>(</span><span class='va'>x</span>, rounding <span class='op'>=</span> <span class='st'>"up_or_down"</span>, threshold <span class='op'>=</span> <span class='fl'>5</span>, decimals <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>String or numeric. Rounded number. <code>x</code> needs to be a string unless
<code>decimals</code> is specified (most likely by a function that uses <code>unround()</code> as
a helper).</p></td>
    </tr>
    <tr>
      <th>rounding</th>
      <td><p>String. Rounding method presumably used to create <code>x</code>.
Default is <code>"up_or_down"</code>. For more, see section <code>Rounding</code>.</p></td>
    </tr>
    <tr>
      <th>threshold</th>
      <td><p>Integer. Number from which to round up or down. Other
rounding methods are not affected. Default is <code>5</code>.</p></td>
    </tr>
    <tr>
      <th>decimals</th>
      <td><p>Integer. This argument is meant to make <code>unround()</code> more
efficient to use as a helper function so that it doesn't need to
redundantly count decimal places. Don't specify it otherwise. Default is
<code>NULL</code>, in which case decimal places really are counted internally and <code>x</code>
needs to be a string.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A tibble with seven columns: <code>range</code>, <code>rounding</code>, <code>lower</code>,
<code>incl_lower</code>, <code>x</code>, <code>incl_upper</code>, and <code>upper</code>. The <code>range</code> column is a handy
representation of the information stored in the columns from <code>lower</code> to
<code>upper</code>, in the same order.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The function is vectorized over <code>x</code> and <code>rounding</code>. This can be
useful to unround multiple numbers at once, or to check how a single number
is unrounded with different assumed rounding methods.</p>
<p>If both vectors have a length greater than 1, it needs to be the same
length. However, this will pair numbers with rounding methods, which can be
confusing. It is recommended that at least one of these input vectors has
length 1.</p>
<p>Why does <code>x</code> need to be a string if <code>decimals</code> is not specified? In that
case, <code>unround()</code> needs to count decimal places by itself. If <code>x</code> then was
numeric, it wouldn't have any trailing zeros because these get dropped from
numerics.</p>
<p>Trailing zeros are as important for reconstructing boundary values as any
other trailing digits would be. Strings don't drop trailing zeros, so they
are used instead.</p>
    <h2 class="hasAnchor" id="rounding"><a class="anchor" href="#rounding"></a>Rounding</h2>

    <p>Depending on how <code>x</code> was rounded, the boundary values can
be inclusive or exclusive. The <code>incl_lower</code> and <code>incl_upper</code> columns in the
resulting tibble are <code>TRUE</code> in the first case and <code>FALSE</code> in the second.
The <code>range</code> column reflects this with equation and inequation signs.</p>
<p>However, these ranges are based on assumptions about the way <code>x</code> was
rounded. Set <code>rounding</code> to the rounding method that hypothetically lead to
<code>x</code>:</p><table class='table'>
<tr><td><strong>Value of <code>rounding</code></strong></td><td><strong>Corresponding range</strong></td></tr>
<tr><td><code>"up_or_down"</code> (default)</td><td><code>lower &lt;= x &lt;= upper</code></td></tr>
<tr><td><code>"up"</code></td><td><code>lower &lt;= x &lt; upper</code></td></tr>
<tr><td><code>"down"</code></td><td><code>lower &lt; x &lt;= upper</code></td></tr>
<tr><td><code>"even"</code></td><td>(no fix range)</td></tr>
<tr><td><code>"ceiling"</code></td><td><code>lower &lt; x = upper</code></td></tr>
<tr><td><code>"floor"</code></td><td><code>lower = x &lt; upper</code></td></tr>
<tr><td><code>"trunc"</code> (positive <code>x</code>)</td><td><code>lower = x &lt; upper</code></td></tr>
<tr><td><code>"trunc"</code> (negative <code>x</code>)</td><td><code>lower &lt; x = upper</code></td></tr>
<tr><td><code>"trunc"</code> (zero <code>x</code>)</td><td><code>lower &lt; x &lt; upper</code></td></tr>
<tr><td><code>"anti_trunc"</code> (positive <code>x</code>)</td><td><code>lower &lt; x = upper</code></td></tr>
<tr><td><code>"anti_trunc"</code> (negative <code>x</code>)</td><td><code>lower = x &lt; upper</code></td></tr>
<tr><td><code>"anti_trunc"</code> (zero <code>x</code>)</td><td>(undefined; <code>NA</code>)</td></tr>
</table>



<p>Base R's own <code><a href='https://rdrr.io/r/base/Round.html'>round()</a></code> (R version &gt;= 4.0.0), referenced by <code>rounding = "even"</code>, is reconstructed in the same way as <code>"up_or_down"</code>, but whether the
boundary values are inclusive or not is hard to predict. Therefore,
<code>unround()</code> checks if they are, and informs you about it.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>For more about rounding <code>"up"</code>, <code>"down"</code>, or to <code>"even"</code>, see
documentation for <code><a href='round_up_from.html'>round_up()</a></code>.</p>
<p>For more about the less likely <code>rounding</code> methods, <code>"ceiling"</code>, <code>"floor"</code>,
<code>"trunc"</code>, and <code>"anti_trunc"</code>, see documentation for <code><a href='round_ceiling.html'>round_ceiling()</a></code>.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'><span class='co'># By default, the function assumes that `x`</span></span>
<span class='r-in'><span class='co'># was either rounded up or down:</span></span>
<span class='r-in'><span class='fu'>unround</span><span class='op'>(</span><span class='st'>"2.7"</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'># A tibble: 1 × 7</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   range                  rounding   lower incl_lower x     incl_upper upper</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>                  <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>      <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;lgl&gt;</span>      <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;lgl&gt;</span>      <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>1</span> 2.65 &lt;= x(2.7) &lt;= 2.75 up_or_down  2.65 TRUE       2.7   TRUE        2.75</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># If `x` was rounded up, run this:</span></span>
<span class='r-in'><span class='fu'>unround</span><span class='op'>(</span><span class='st'>"2.7"</span>, rounding <span class='op'>=</span> <span class='st'>"up"</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'># A tibble: 1 × 7</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   range                 rounding lower incl_lower x     incl_upper upper</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>                 <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>    <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;lgl&gt;</span>      <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;lgl&gt;</span>      <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>1</span> 2.65 &lt;= x(2.7) &lt; 2.75 up        2.65 TRUE       2.7   FALSE       2.75</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># Likewise with rounding down...</span></span>
<span class='r-in'><span class='fu'>unround</span><span class='op'>(</span><span class='st'>"2.7"</span>, rounding <span class='op'>=</span> <span class='st'>"down"</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'># A tibble: 1 × 7</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   range                 rounding lower incl_lower x     incl_upper upper</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>                 <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>    <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;lgl&gt;</span>      <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;lgl&gt;</span>      <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>1</span> 2.65 &lt; x(2.7) &lt;= 2.75 down      2.65 FALSE      2.7   TRUE        2.75</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># ...and with `base::round()` which, broadly</span></span>
<span class='r-in'><span class='co'># speaking, rounds to the nearest even number:</span></span>
<span class='r-in'><span class='fu'>unround</span><span class='op'>(</span><span class='st'>"2.7"</span>, rounding <span class='op'>=</span> <span class='st'>"even"</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'># A tibble: 1 × 7</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   range                rounding lower incl_lower x     incl_upper upper</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>                <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>    <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;lgl&gt;</span>      <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;lgl&gt;</span>      <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>1</span> 2.65 &lt; x(2.7) &lt; 2.75 even      2.65 FALSE      2.7   FALSE       2.75</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># Multiple input number-strings return</span></span>
<span class='r-in'><span class='co'># multiple rows in the output data frame:</span></span>
<span class='r-in'><span class='fu'>unround</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3.6</span>, <span class='st'>"5.20"</span>, <span class='fl'>5.174</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BBBB;'>ℹ</span> 3 values unrounded:</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'># A tibble: 3 × 7</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   range                        rounding  lower incl_lower x     incl_upper upper</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>                        <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>     <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;lgl&gt;</span>      <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;lgl&gt;</span>      <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>1</span> 3.55 &lt;= x(3.6) &lt;= 3.65       up_or_do…  3.55 TRUE       3.6   TRUE        3.65</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>2</span> 5.195 &lt;= x(5.20) &lt;= 5.205    up_or_do…  5.20 TRUE       5.20  TRUE        5.20</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>3</span> 5.1735 &lt;= x(5.174) &lt;= 5.1745 up_or_do…  5.17 TRUE       5.174 TRUE        5.17</span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Lukas Jung.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


