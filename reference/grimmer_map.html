<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>GRIMMER-test many cases at once — grimmer_map • scrutiny</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="GRIMMER-test many cases at once — grimmer_map"><meta name="description" content="Call grimmer_map() to GRIMMER-test any number of combinations
of mean, standard deviation, sample size, and number of items. Mapping
function for GRIMMER testing.
For summary statistics, call audit() on the results. Visualize results
using grim_plot(), as with GRIM results."><meta property="og:description" content="Call grimmer_map() to GRIMMER-test any number of combinations
of mean, standard deviation, sample size, and number of items. Mapping
function for GRIMMER testing.
For summary statistics, call audit() on the results. Visualize results
using grim_plot(), as with GRIM results."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">scrutiny</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Consistency tests</h6></li>
    <li><a class="dropdown-item" href="../articles/grim.html">GRIM</a></li>
    <li><a class="dropdown-item" href="../articles/grimmer.html">GRIMMER</a></li>
    <li><a class="dropdown-item" href="../articles/debit.html">DEBIT</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Plausibility checks</h6></li>
    <li><a class="dropdown-item" href="../articles/duplicates.html">Duplication analysis</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Quick guides</h6></li>
    <li><a class="dropdown-item" href="../articles/rounding-options.html">Rounding options</a></li>
    <li><a class="dropdown-item" href="../articles/consistency-tests-simple.html">Implementing your consistency test</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Developer tools</h6></li>
    <li><a class="dropdown-item" href="../articles/rounding-in-depth.html">Rounding in depth</a></li>
    <li><a class="dropdown-item" href="../articles/consistency-tests-in-depth.html">Consistency tests in depth</a></li>
    <li><a class="dropdown-item" href="../articles/devtools.html">Developer tools</a></li>
    <li><a class="dropdown-item" href="../articles/wrangling.html">Data wrangling</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Other</h6></li>
    <li><a class="dropdown-item" href="../articles/related.html">Related software</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/lhdjung/scrutiny/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>GRIMMER-test many cases at once</h1>
      <small class="dont-index">Source: <a href="https://github.com/lhdjung/scrutiny/blob/main/R/grimmer-map.R" class="external-link"><code>R/grimmer-map.R</code></a></small>
      <div class="d-none name"><code>grimmer_map.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Call <code>grimmer_map()</code> to GRIMMER-test any number of combinations
of mean, standard deviation, sample size, and number of items. Mapping
function for GRIMMER testing.</p>
<p>For summary statistics, call <code><a href="audit.html">audit()</a></code> on the results. Visualize results
using <code><a href="grim_plot.html">grim_plot()</a></code>, as with GRIM results.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">grimmer_map</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  items <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  merge_items <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  x <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sd <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  n <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  show_reason <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  rounding <span class="op">=</span> <span class="st">"up_or_down"</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  symmetric <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  tolerance <span class="op">=</span> <span class="va">.Machine</span><span class="op">$</span><span class="va">double.eps</span><span class="op">^</span><span class="fl">0.5</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Data frame with columns <code>x</code>, <code>sd</code>, <code>n</code>, and optionally <code>items</code>
(see documentation for <code><a href="grim.html">grim()</a></code>). Any other columns in <code>data</code> will be
returned alongside GRIMMER test results.</p></dd>


<dt id="arg-items">items<a class="anchor" aria-label="anchor" href="#arg-items"></a></dt>
<dd><p>Integer. If there is no <code>items</code> column in <code>data</code>, this specifies
the number of items composing the <code>x</code> and <code>sd</code> values. Default is <code>1</code>, the
most common case.</p></dd>


<dt id="arg-merge-items">merge_items<a class="anchor" aria-label="anchor" href="#arg-merge-items"></a></dt>
<dd><p>Logical. If <code>TRUE</code> (the default), there will be no <code>items</code>
column in the output. Instead, values from an <code>items</code> column or argument
will be multiplied with values in the <code>n</code> column. This is only for
presentation and does not affect test results.</p></dd>


<dt id="arg-x-sd-n">x, sd, n<a class="anchor" aria-label="anchor" href="#arg-x-sd-n"></a></dt>
<dd><p>Optionally, specify these arguments as column names in <code>data</code>.</p></dd>


<dt id="arg-show-reason">show_reason<a class="anchor" aria-label="anchor" href="#arg-show-reason"></a></dt>
<dd><p>Logical (length 1). Should there be a <code>reason</code> column that
shows the reasons for inconsistencies and <code>"Passed all"</code> for consistent
values? Default is <code>FALSE</code>. See below for reference.</p></dd>


<dt id="arg-rounding-threshold-symmetric-tolerance">rounding, threshold, symmetric, tolerance<a class="anchor" aria-label="anchor" href="#arg-rounding-threshold-symmetric-tolerance"></a></dt>
<dd><p>Further parameters of
GRIMMER testing; see documentation for <code><a href="grimmer.html">grimmer()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A tibble with these columns –</p><ul><li><p><code>x</code>, <code>sd</code>, <code>n</code>: the inputs.</p></li>
<li><p><code>consistency</code>: GRIMMER consistency of <code>x</code>, <code>n</code>, and <code>items</code>.</p></li>
<li><p><code>reason</code>: If consistent, <code>"Passed all"</code>. If inconsistent, it says which
test was failed (see below).</p></li>
<li><p><code>&lt;extra&gt;</code>: any columns from <code>data</code> other than <code>x</code>, <code>n</code>, and <code>items</code>.</p></li>
</ul><p>The <code>reason</code> columns refers to GRIM and the three GRIMMER tests (Allard
2018). Briefly, these are:</p><ol><li><p>The reconstructed sum of squared observations must be a whole number.</p></li>
<li><p>The reconstructed SD must match the reported one.</p></li>
<li><p>The parity of the reconstructed sum of squared observations must match the
parity of the reconstructed sum of integers of which the reported means
are fractions; i.e., either both are even or both are odd.</p></li>
</ol><p>The tibble has the <code>scr_grimmer_map</code> class, which is recognized by the
<code><a href="audit.html">audit()</a></code> generic. It also has the <code>scr_grim_map</code> class, so it can be
visualized by <code><a href="grim_plot.html">grim_plot()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="summaries-with-audit-">Summaries with <code><a href="audit.html">audit()</a></code><a class="anchor" aria-label="anchor" href="#summaries-with-audit-"></a></h2>
    <p>There is an S3 method for <code><a href="audit.html">audit()</a></code>,
so you can call <code><a href="audit.html">audit()</a></code> following <code>grimmer_map()</code> to get a summary of
<code>grimmer_map()</code>'s results. It is a tibble with a single row and these
columns –</p><ol><li><p><code>incons_cases</code>: number of GRIMMER-inconsistent value sets.</p></li>
<li><p><code>all_cases</code>: total number of value sets.</p></li>
<li><p><code>incons_rate</code>: proportion of GRIMMER-inconsistent value sets.</p></li>
<li><p><code>fail_grim</code>: number of value sets that fail the GRIM test.</p></li>
<li><p><code>fail_test1</code>: number of value sets that fail the first GRIMMER test (see
below).</p></li>
<li><p><code>fail_test2</code>: number of value sets that fail the second GRIMMER test.</p></li>
<li><p><code>fail_test3</code>: number of value sets that fail the third GRIMMER test.</p></li>
</ol><p>The <code>reason</code> columns refers to the three GRIMMER tests (see Allard 2018).
These are:</p><ol><li><p>The reconstructed sum of squared observations must be a whole number.</p></li>
<li><p>The reconstructed SD must match the reported one.</p></li>
<li><p>The parity of the reconstructed sum of squared observations must match the
parity of the reconstructed sum of integers of which the reported means
are fractions; i.e., either both are even or both are odd.</p></li>
</ol></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Allard, A. (2018). Analytic-GRIMMER: a new way of testing the
possibility of standard deviations.
https://aurelienallard.netlify.app/post/anaytic-grimmer-possibility-standard-deviations/</p>
<p>Anaya, J. (2016). The GRIMMER test: A method for testing the validity of
reported measures of variability. <em>PeerJ Preprints.</em>
https://peerj.com/preprints/2400v1/</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Use `grimmer_map()` on data like these:</span></span></span>
<span class="r-in"><span><span class="va">pigs5</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 12 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    x     sd        n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 7.22  5.30     38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 4.74  6.55     31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 5.23  2.55     35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2.57  2.57     30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 6.77  2.18     33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2.68  2.59     34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 7.01  6.68     35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 7.38  3.65     32</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 3.14  5.32     33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 6.89  4.18     37</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> 5.00  2.18     31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> 0.24  6.43     34</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The `consistency` column shows whether</span></span></span>
<span class="r-in"><span><span class="co"># the values to its left are GRIMMER-consistent.</span></span></span>
<span class="r-in"><span><span class="co"># If they aren't, the `reason` column says why:</span></span></span>
<span class="r-in"><span><span class="va">pigs5</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">grimmer_map</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 12 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    x     sd        n consistency reason                       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 7.22  5.30     38 FALSE       GRIM inconsistent            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 4.74  6.55     31 TRUE        Passed all                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 5.23  2.55     35 FALSE       GRIMMER inconsistent (test 3)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2.57  2.57     30 TRUE        Passed all                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 6.77  2.18     33 FALSE       GRIM inconsistent            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2.68  2.59     34 TRUE        Passed all                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 7.01  6.68     35 FALSE       GRIM inconsistent            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 7.38  3.65     32 TRUE        Passed all                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 3.14  5.32     33 FALSE       GRIM inconsistent            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 6.89  4.18     37 TRUE        Passed all                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> 5.00  2.18     31 TRUE        Passed all                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> 0.24  6.43     34 TRUE        Passed all                   </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get summaries with `audit()`:</span></span></span>
<span class="r-in"><span><span class="va">pigs5</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">grimmer_map</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="audit.html">audit</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   incons_cases all_cases incons_rate fail_grim fail_test1 fail_test2 fail_test3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>            5        12       0.417         4          0          0          1</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lukas Jung.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

