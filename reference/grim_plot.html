<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Visualize GRIM test results — grim_plot • scrutiny</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Visualize GRIM test results — grim_plot"><meta property="og:description" content="grim_plot() visualizes summary data and their mutual GRIM
consistency. Call this function only on a data frame that resulted from a
call to grim_map() in which adjust_x was set to 1.
Consistent and inconsistent value pairs from the input data frame are shown
in distinctive colors. By default, consistent value pairs are blue and
inconsistent ones are red. These and other parameters of the underlying
geoms can be controlled via arguments.
The background raster flags every inconsistent value pair in the space
defined by the decimals argument. That is only informative for value
pairs where the mean/percentage has exactly that many decimal places. The
raster is independent of the data, but it follows the rounding
specification in the grim_map() call."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">scrutiny</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="divider">
    <li class="dropdown-header">Consistency tests</li>
    <li>
      <a href="../articles/grim.html">GRIM</a>
    </li>
    <li>
      <a href="../articles/debit.html">DEBIT</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Infrastructure</li>
    <li>
      <a href="../articles/rounding.html">Rounding</a>
    </li>
    <li>
      <a href="../articles/infrastructure.html">Infrastructure beyond rounding</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Other</li>
    <li>
      <a href="../articles/wrangling.html">Data wrangling</a>
    </li>
    <li>
      <a href="../articles/related.html">Related software</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/lhdjung/scrutiny/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Visualize GRIM test results</h1>
    <small class="dont-index">Source: <a href="https://github.com/lhdjung/scrutiny/blob/HEAD/R/grim-plot-new.R" class="external-link"><code>R/grim-plot-new.R</code></a></small>
    <div class="hidden name"><code>grim_plot.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>grim_plot()</code> visualizes summary data and their mutual GRIM
consistency. Call this function only on a data frame that resulted from a
call to <code><a href="grim_map.html">grim_map()</a></code> in which <code>adjust_x</code> was set to <code>1</code>.</p>
<p>Consistent and inconsistent value pairs from the input data frame are shown
in distinctive colors. By default, consistent value pairs are blue and
inconsistent ones are red. These and other parameters of the underlying
geoms can be controlled via arguments.</p>
<p>The background raster flags every inconsistent value pair in the space
defined by the <code>decimals</code> argument. That is only informative for value
pairs where the mean/percentage has exactly that many decimal places. The
raster is independent of the data, but it follows the <code>rounding</code>
specification in the <code><a href="grim_map.html">grim_map()</a></code> call.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">grim_plot</span><span class="op">(</span>
  data <span class="op">=</span> <span class="cn">NULL</span>,
  show_raster <span class="op">=</span> <span class="cn">TRUE</span>,
  show_zoom <span class="op">=</span> <span class="cn">TRUE</span>,
  show_full_range <span class="op">=</span> <span class="cn">TRUE</span>,
  n <span class="op">=</span> <span class="cn">NULL</span>,
  decimals <span class="op">=</span> <span class="fl">2</span>,
  color_cons <span class="op">=</span> <span class="st">"royalblue1"</span>,
  color_incons <span class="op">=</span> <span class="st">"red"</span>,
  tile_alpha <span class="op">=</span> <span class="fl">1</span>,
  tile_size <span class="op">=</span> <span class="fl">1.5</span>,
  raster_alpha <span class="op">=</span> <span class="fl">0.5</span>,
  raster_color <span class="op">=</span> <span class="st">"gray50"</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data</dt>
<dd><p>Data frame. Result of a call to <code><a href="grim_map.html">grim_map()</a></code>.</p></dd>
<dt>show_raster</dt>
<dd><p>Boolean. If <code>TRUE</code> (the default), the plot has a
background raster.</p></dd>
<dt>show_zoom</dt>
<dd><p>Boolean. Should zoom be added if the number of decimal
places is 3 or greater? Default is <code>TRUE</code>.</p></dd>
<dt>show_full_range</dt>
<dd><p>Boolean. Should the full range of the plot always be
shown, regardless of the empirical values? Default is <code>TRUE</code>.</p></dd>
<dt>n</dt>
<dd><p>Integer. Maximal value on the x-axis. Default is <code>NULL</code>, in which
case <code>n</code> becomes <code>10 ^ decimals</code> (e.g., <code>100</code> if <code>decimals</code> is <code>2</code>).</p></dd>
<dt>decimals</dt>
<dd><p>Integer. Number of decimal places for which the background
raster will be generated. Only <code>1</code> and <code>2</code> are currently supported. Default
is <code>2</code>.</p></dd>
<dt>color_cons, color_incons</dt>
<dd><p>Strings. Fill colors of the consistent and
inconsistent scatter points. Defaults are <code>"royalblue1"</code> (consistent) and
<code>"red"</code> (inconsistent).</p></dd>
<dt>tile_alpha, tile_size</dt>
<dd><p>Numeric. Further parameters of the scatter
points: opacity and, indirectly, size. Defaults are <code>1</code> and <code>1.5</code>.</p></dd>
<dt>raster_alpha, raster_color</dt>
<dd><p>Numeric and string, respectively. Parameters
of the background raster: opacity and fill color. Defaults are <code>0.5</code> and
<code>"gray50"</code>.</p></dd>
</dl></div>
    <div id="background-raster">
    <h2>Background raster</h2>
    <p>The background raster flags inconsistent value
sets with dark boxes. All other places in the plot denote consistent value
sets.</p>
<p>As the raster varies by rounding procedure, it will automatically
correspond to the <code>rounding</code> argument specified in the preceding
<code><a href="grim_map.html">grim_map()</a></code> call. This works fast because the raster is based on data
saved in the package itself, so these data don't need to be generated anew
every time the function is called.</p>
<p>With the default, <code>"up_or_down"</code>, strikingly few values are flagged as
inconsistent for sample sizes 40 and 80 (or 400 and 800, etc.). This effect
disappears if <code>rounding</code> is set to any other value. For a list of values
that <code>rounding</code> can take, see documentation for <code><a href="grim.html">grim()</a></code>, section
<code>Rounding</code>.</p>
<p>The 4/8 leniency effect arises because accepting values rounded either up
or down is more careful and conservative than any other rounding procedure.
In any case, <code>grim_plot()</code> doesn't cause this effect --- it only reveals
it.</p>
<p>The number of tiles in the plot, including both the raster and the points
spared by it, is \((10 ^ {decimals}) ^ 2\). So it's 10.000 with the
default <code>decimals = 2</code>, and one million with <code>decimals = 3</code>. For each
greater <code>decimals</code> value (with <code>decimals &gt;= 2</code>), the number of tiles is 100
times the former value!</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># Call `grim_plot()` following `grim_map()`:</span></span>
<span class="r-in"><span class="va">pigs1</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="grim_map.html">grim_map</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu">grim_plot</span><span class="op">(</span><span class="op">)</span></span>
<span class="r-plt img"><img src="grim_plot-1.png" alt="" width="700" height="433"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># If you change the rounding method</span></span>
<span class="r-in"><span class="co"># in `grim_map()`, the plot will</span></span>
<span class="r-in"><span class="co"># follow automatically:</span></span>
<span class="r-in"><span class="va">pigs1</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="grim_map.html">grim_map</a></span><span class="op">(</span>rounding <span class="op">=</span> <span class="st">"up"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu">grim_plot</span><span class="op">(</span><span class="op">)</span></span>
<span class="r-plt img"><img src="grim_plot-2.png" alt="" width="700" height="433"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># For percentages, the y-axis</span></span>
<span class="r-in"><span class="co"># label also changes automatically:</span></span>
<span class="r-in"><span class="va">pigs2</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="grim_map.html">grim_map</a></span><span class="op">(</span>percent <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu">grim_plot</span><span class="op">(</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> `x` converted from percentage</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Removed 6 rows containing missing values (geom_tile).</span>
<span class="r-plt img"><img src="grim_plot-3.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Lukas Jung.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer></div>

  


  

  </body></html>

