<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="For every value in a vector or data frame, duplicate_detect()
tests whether there is at least one identical value. Test results are
presented next to every value.
By default, only numeric columns and string columns coercible to numeric
are tested (if x is a data frame). Any other columns are silently
dropped.
This function is a blunt tool designed for initial data checking. Don't put
too much weight on its results.
For summary statistics, call audit() on the results."><title>Detect duplicate values — duplicate_detect • scrutiny</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Detect duplicate values — duplicate_detect"><meta property="og:description" content="For every value in a vector or data frame, duplicate_detect()
tests whether there is at least one identical value. Test results are
presented next to every value.
By default, only numeric columns and string columns coercible to numeric
are tested (if x is a data frame). Any other columns are silently
dropped.
This function is a blunt tool designed for initial data checking. Don't put
too much weight on its results.
For summary statistics, call audit() on the results."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">scrutiny</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.4</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Consistency tests</h6>
    <a class="dropdown-item" href="../articles/grim.html">GRIM</a>
    <a class="dropdown-item" href="../articles/grimmer.html">GRIMMER</a>
    <a class="dropdown-item" href="../articles/debit.html">DEBIT</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Infrastructure</h6>
    <a class="dropdown-item" href="../articles/infrastructure.html">General infrastructure</a>
    <a class="dropdown-item" href="../articles/consistency-tests.html">Implementing consistency tests</a>
    <a class="dropdown-item" href="../articles/rounding.html">Rounding</a>
    <a class="dropdown-item" href="../articles/wrangling.html">Data wrangling</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Other</h6>
    <a class="dropdown-item" href="../articles/related.html">Related software</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/lhdjung/scrutiny/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Detect duplicate values</h1>
      <small class="dont-index">Source: <a href="https://github.com/lhdjung/scrutiny/blob/HEAD/R/duplicate-detect.R" class="external-link"><code>R/duplicate-detect.R</code></a></small>
      <div class="d-none name"><code>duplicate_detect.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>For every value in a vector or data frame, <code>duplicate_detect()</code>
tests whether there is at least one identical value. Test results are
presented next to every value.</p>
<p>By default, only numeric columns and string columns coercible to numeric
are tested (if <code>x</code> is a data frame). Any other columns are silently
dropped.</p>
<p>This function is a blunt tool designed for initial data checking. Don't put
too much weight on its results.</p>
<p>For summary statistics, call <code><a href="audit.html">audit()</a></code> on the results.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">duplicate_detect</span><span class="op">(</span><span class="va">x</span>, numeric_only <span class="op">=</span> <span class="cn">TRUE</span>, colname_end <span class="op">=</span> <span class="st">"dup"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>Vector or data frame.</p></dd>


<dt>numeric_only</dt>
<dd><p>Boolean. If <code>TRUE</code> (the default) and if <code>x</code> is a data
frame, the function will only test numeric columns and string columns
coercible to numeric. <em>Note</em>: Be careful when setting it to <code>FALSE</code>. This
can lead to all kinds of coercion issues.</p></dd>


<dt>colname_end</dt>
<dd><p>String. Name ending of the Boolean test result columns.
Default is <code>"dup"</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A tibble (data frame) —</p><ul><li><p>If <code>x</code> is a vector, there are two columns: the input <code>value</code> and the
Boolean <code>has_duplicates</code>.</p></li>
<li><p>If <code>x</code> is a data frame, the output tibble has (some of) the columns from
<code>x</code>, and to each of these columns' right, the corresponding Boolean
column with an index value.</p></li>
</ul><p>The tibble has the <code>scr_dup_detect</code> class, which is recognized by the
<code><a href="audit.html">audit()</a></code> generic.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function is not very informative with many input values that
only have a few characters each. Many of them may have duplicates just by
chance. For example, in R's built-in <code>iris</code> data set, 99% of values have
duplicates.</p>
<p>In general, the fewer values and the more characters per value there are,
the more significant <code>duplicate_detect()</code>'s results will be.</p>
    </div>
    <div class="section level2">
    <h2 id="summaries-with-audit-">Summaries with <code><a href="audit.html">audit()</a></code><a class="anchor" aria-label="anchor" href="#summaries-with-audit-"></a></h2>
    <p>There is an S3 method for the <code><a href="audit.html">audit()</a></code>
generic, so you can call <code><a href="audit.html">audit()</a></code> following <code>duplicate_detect()</code>. It
returns a tibble with these columns ---</p><ul><li><p><code>variable</code>: The original data frame's variables with at least one
"duplicated" value: one that has at least one duplicate anywhere else in
the data frame. For a vector, <code>x</code>.</p></li>
<li><p><code>n_duplicated</code>: Number of "duplicated" values of that variable: those
that have at least one duplicate anywhere in the data frame.</p></li>
<li><p><code>dup_rate</code>: Rate of "duplicated" values of that variable.</p></li>
</ul><p>The final row, <code>.total</code>, summarizes across all other rows: It adds up the
<code>n_duplicated</code> and <code>n_total</code> columns, and calculates the average of the
<code>dup_rate</code> column.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="duplicate_count.html">duplicate_count()</a></code> provides a frequency table.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Find duplicate values in a data frame...</span></span></span>
<span class="r-in"><span><span class="fu">duplicate_detect</span><span class="op">(</span>x <span class="op">=</span> <span class="va">pigs4</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   snout snout_dup  tail tail_dup</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>  4.74 FALSE      6.89 FALSE   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>  8.13 TRUE       7.33 FALSE   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>  4.22 TRUE       6.10 FALSE   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>  4.22 TRUE       7.57 FALSE   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span>  5.18 FALSE      8.13 TRUE    </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ...or in a single vector:</span></span></span>
<span class="r-in"><span><span class="fu">duplicate_detect</span><span class="op">(</span>x <span class="op">=</span> <span class="va">pigs4</span><span class="op">$</span><span class="va">snout</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   value has_duplicates</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>  4.74 FALSE         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>  8.13 FALSE         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>  4.22 TRUE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>  4.22 TRUE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span>  5.18 FALSE         </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Summary statistics with `audit()`:</span></span></span>
<span class="r-in"><span><span class="va">pigs4</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">duplicate_detect</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="audit.html">audit</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   variable n_duplicated n_total dup_rate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> snout               3       5      0.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> tail                1       5      0.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> .total              4      10      0.4</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># If there are many values and/or few</span></span></span>
<span class="r-in"><span><span class="co"># characters per value, `duplicate_detect()`</span></span></span>
<span class="r-in"><span><span class="co"># can be misleading:</span></span></span>
<span class="r-in"><span><span class="va">iris</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">duplicate_detect</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 150 × 8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Sepal.Length Sepal.Length_dup Sepal…¹ Sepal…² Petal…³ Petal…⁴ Petal…⁵ Petal…⁶</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>          5.1 TRUE                 3.5 TRUE        1.4 TRUE        0.2 TRUE   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>          4.9 TRUE                 3   TRUE        1.4 TRUE        0.2 TRUE   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>          4.7 TRUE                 3.2 TRUE        1.3 TRUE        0.2 TRUE   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>          4.6 TRUE                 3.1 TRUE        1.5 TRUE        0.2 TRUE   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>          5   TRUE                 3.6 TRUE        1.4 TRUE        0.2 TRUE   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>          5.4 TRUE                 3.9 TRUE        1.7 TRUE        0.4 TRUE   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>          4.6 TRUE                 3.4 TRUE        1.4 TRUE        0.3 TRUE   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>          5   TRUE                 3.4 TRUE        1.5 TRUE        0.2 TRUE   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>          4.4 TRUE                 2.9 TRUE        1.4 TRUE        0.2 TRUE   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>          4.9 TRUE                 3.1 TRUE        1.5 TRUE        0.1 TRUE   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 140 more rows, and abbreviated variable names ¹​Sepal.Width,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   ²​Sepal.Width_dup, ³​Petal.Length, ⁴​Petal.Length_dup, ⁵​Petal.Width,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   ⁶​Petal.Width_dup</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">iris</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">duplicate_detect</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="audit.html">audit</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   variable     n_duplicated n_total dup_rate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Petal.Length          150     150    1    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Petal.Width           148     150    0.987</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> Sepal.Length          144     150    0.96 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> Sepal.Width           150     150    1    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> .total                592     600    0.987</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Lukas Jung.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

