<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Restore trailing zeros — restore_zeros • scrutiny</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Restore trailing zeros — restore_zeros"><meta name="description" content="restore_zeros() takes a vector with values that might have
lost trailing zeros, most likely from being registered as numeric. It turns
each value into a string and adds trailing zeros until the mantissa hits
some limit.
The default for that limit is the number of digits in the longest mantissa
of the vector's values. The length of the integer part plays no role.
Don't rely on the default limit without checking: The original width could
have been larger because the longest extant mantissa might itself have lost
trailing zeros.
restore_zeros_df() is a variant for data frames. It wraps
restore_zeros() and, by default, applies it to all columns that are
coercible to numeric."><meta property="og:description" content="restore_zeros() takes a vector with values that might have
lost trailing zeros, most likely from being registered as numeric. It turns
each value into a string and adds trailing zeros until the mantissa hits
some limit.
The default for that limit is the number of digits in the longest mantissa
of the vector's values. The length of the integer part plays no role.
Don't rely on the default limit without checking: The original width could
have been larger because the longest extant mantissa might itself have lost
trailing zeros.
restore_zeros_df() is a variant for data frames. It wraps
restore_zeros() and, by default, applies it to all columns that are
coercible to numeric."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">scrutiny</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Consistency tests</h6></li>
    <li><a class="dropdown-item" href="../articles/grim.html">GRIM</a></li>
    <li><a class="dropdown-item" href="../articles/grimmer.html">GRIMMER</a></li>
    <li><a class="dropdown-item" href="../articles/debit.html">DEBIT</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Plausibility checks</h6></li>
    <li><a class="dropdown-item" href="../articles/duplicates.html">Duplication analysis</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Quick guides</h6></li>
    <li><a class="dropdown-item" href="../articles/rounding-options.html">Rounding options</a></li>
    <li><a class="dropdown-item" href="../articles/consistency-tests-simple.html">Implementing your consistency test</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Developer tools</h6></li>
    <li><a class="dropdown-item" href="../articles/rounding-in-depth.html">Rounding in depth</a></li>
    <li><a class="dropdown-item" href="../articles/consistency-tests-in-depth.html">Consistency tests in depth</a></li>
    <li><a class="dropdown-item" href="../articles/devtools.html">Developer tools</a></li>
    <li><a class="dropdown-item" href="../articles/wrangling.html">Data wrangling</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Other</h6></li>
    <li><a class="dropdown-item" href="../articles/related.html">Related software</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/lhdjung/scrutiny/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Restore trailing zeros</h1>
      <small class="dont-index">Source: <a href="https://github.com/lhdjung/scrutiny/blob/v0.5.0/R/restore-zeros.R" class="external-link"><code>R/restore-zeros.R</code></a></small>
      <div class="d-none name"><code>restore_zeros.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>restore_zeros()</code> takes a vector with values that might have
lost trailing zeros, most likely from being registered as numeric. It turns
each value into a string and adds trailing zeros until the mantissa hits
some limit.</p>
<p>The default for that limit is the number of digits in the longest mantissa
of the vector's values. The length of the integer part plays no role.</p>
<p>Don't rely on the default limit without checking: The original width could
have been larger because the longest extant mantissa might itself have lost
trailing zeros.</p>
<p><code>restore_zeros_df()</code> is a variant for data frames. It wraps
<code>restore_zeros()</code> and, by default, applies it to all columns that are
coercible to numeric.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">restore_zeros</span><span class="op">(</span><span class="va">x</span>, width <span class="op">=</span> <span class="cn">NULL</span>, sep_in <span class="op">=</span> <span class="st">"\\."</span>, sep_out <span class="op">=</span> <span class="va">sep_in</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">restore_zeros_df</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  cols <span class="op">=</span> <span class="fu">everything</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  check_numeric_like <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  check_decimals <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  width <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sep_in <span class="op">=</span> <span class="st">"\\."</span>,</span>
<span>  sep_out <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>Numeric (or string coercible to numeric). Vector of numbers that
might have lost trailing zeros.</p></dd>


<dt id="arg-width">width<a class="anchor" aria-label="anchor" href="#arg-width"></a></dt>
<dd><p>Integer. Number of decimal places the mantissas should have,
including the restored zeros. Default is <code>NULL</code>, in which case the number
of characters in the longest mantissa will be used instead.</p></dd>


<dt id="arg-sep-in">sep_in<a class="anchor" aria-label="anchor" href="#arg-sep-in"></a></dt>
<dd><p>Substring that separates the input's mantissa from its integer
part. Default is <code>"\\."</code>, which renders a decimal point.</p></dd>


<dt id="arg-sep-out">sep_out<a class="anchor" aria-label="anchor" href="#arg-sep-out"></a></dt>
<dd><p>Substring that will be returned in the output to separate the
mantissa from the integer part. By default, <code>sep_out</code> is the same as
<code>sep_in</code>.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Data frame or matrix. Only in <code>restore_zeros_df()</code>, and instead
of <code>x</code>.</p></dd>


<dt id="arg-cols">cols<a class="anchor" aria-label="anchor" href="#arg-cols"></a></dt>
<dd><p>Only in <code>restore_zeros_df()</code>. Select columns from <code>data</code> using
<a href="https://tidyselect.r-lib.org/reference/language.html" class="external-link">tidyselect</a>.
Default is <code>everything()</code>, which selects all columns that pass the test of
<code>check_numeric_like</code>.</p></dd>


<dt id="arg-check-numeric-like">check_numeric_like<a class="anchor" aria-label="anchor" href="#arg-check-numeric-like"></a></dt>
<dd><p>Logical. Only in <code>restore_zeros_df()</code>. If <code>TRUE</code>
(the default), the function will skip columns that are not numeric or
coercible to numeric, as determined by <code><a href="is_numeric_like.html">is_numeric_like()</a></code>.</p></dd>


<dt id="arg-check-decimals">check_decimals<a class="anchor" aria-label="anchor" href="#arg-check-decimals"></a></dt>
<dd><p>Logical. Only in <code>restore_zeros_df()</code>. If set to
<code>TRUE</code>, the function will skip columns where no values have any decimal
places. Default is <code>FALSE</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Only in <code>restore_zeros_df()</code>. These dots must be empty.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>

<ul><li><p>For <code>restore_zeros()</code>, a string vector. At least some of the strings
will have newly restored zeros, unless (1) all input values had the same
number of decimal places, and (2) <code>width</code> was not specified as a number
greater than that single number of decimal places.</p></li>
<li><p>For <code>restore_zeros_df()</code>, a data frame.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>These functions exploit the fact that groups of summary values such
as means or percentages are often reported to the same number of decimal
places. If such a number is known but values were not entered as strings,
trailing zeros will be lost. In this case, <code>restore_zeros()</code> or
<code>restore_zeros_df()</code> will be helpful to prepare data for consistency
testing functions such as <code><a href="grim_map.html">grim_map()</a></code> or <code><a href="grimmer_map.html">grimmer_map()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="displaying-decimal-places">Displaying decimal places<a class="anchor" aria-label="anchor" href="#displaying-decimal-places"></a></h2>
    <p>You might not see all decimal places of
numeric values in a vector, and consequently wonder if <code>restore_zeros()</code>,
when applied to the vector, adds too many zeros. That is because displayed
numbers, unlike stored numbers, are often rounded.</p>
<p>For a vector <code>x</code>, you can count the characters of the longest mantissa from
among its values like this:</p>
<p><code>x %&gt;% decimal_places() %&gt;% max()</code></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Wrapped functions: <code><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf()</a></code>.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># By default, the target width is that of</span></span></span>
<span class="r-in"><span><span class="co"># the longest mantissa:</span></span></span>
<span class="r-in"><span><span class="va">vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">212</span>, <span class="fl">75.38</span>, <span class="fl">4.9625</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">vec</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">restore_zeros</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "212.0000" "75.3800"  "4.9625"  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Alternatively, supply a number via `width`:</span></span></span>
<span class="r-in"><span><span class="va">vec</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">restore_zeros</span><span class="op">(</span>width <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "212.000000" "75.380000"  "4.962500"  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For better printing:</span></span></span>
<span class="r-in"><span><span class="va">iris</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Apply `restore_zeros()` to all numeric</span></span></span>
<span class="r-in"><span><span class="co"># columns, but not to the factor column:</span></span></span>
<span class="r-in"><span><span class="va">iris</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">restore_zeros_df</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 150 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 5.1          3.5         1.4          0.2         setosa </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 4.9          3.0         1.4          0.2         setosa </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 4.7          3.2         1.3          0.2         setosa </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 4.6          3.1         1.5          0.2         setosa </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 5.0          3.6         1.4          0.2         setosa </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 5.4          3.9         1.7          0.4         setosa </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 4.6          3.4         1.4          0.3         setosa </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 5.0          3.4         1.5          0.2         setosa </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 4.4          2.9         1.4          0.2         setosa </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 4.9          3.1         1.5          0.1         setosa </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 140 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Select columns as in `dplyr::select()`:</span></span></span>
<span class="r-in"><span><span class="va">iris</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">restore_zeros_df</span><span class="op">(</span><span class="fu">starts_with</span><span class="op">(</span><span class="st">"Sepal"</span><span class="op">)</span>, width <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 150 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 5.100        3.500                1.4         0.2 setosa </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 4.900        3.000                1.4         0.2 setosa </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 4.700        3.200                1.3         0.2 setosa </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 4.600        3.100                1.5         0.2 setosa </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 5.000        3.600                1.4         0.2 setosa </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 5.400        3.900                1.7         0.4 setosa </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 4.600        3.400                1.4         0.3 setosa </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 5.000        3.400                1.5         0.2 setosa </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 4.400        2.900                1.4         0.2 setosa </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 4.900        3.100                1.5         0.1 setosa </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 140 more rows</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lukas Jung.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

