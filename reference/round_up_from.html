<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Likely rounding procedures — round_up_from • scrutiny</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Likely rounding procedures — round_up_from" />
<meta property="og:description" content="round_up() rounds up from 5, round_down() rounds down from
5. Otherwise, both functions work like base::round().
round_up() and round_down() are special cases of round_up_from() and
round_down_from(), which allow users to choose custom thresholds for
rounding up or down, respectively." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">scrutiny</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/debit.html">DEBIT</a>
    </li>
    <li>
      <a href="../articles/grim.html">GRIM</a>
    </li>
    <li>
      <a href="../articles/infrastructure.html">Infrastructure beyond rounding</a>
    </li>
    <li>
      <a href="../articles/rounding.html">Rounding</a>
    </li>
    <li>
      <a href="../articles/wrangling.html">Data wrangling</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/lhdjung/scrutiny/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Likely rounding procedures</h1>
    <small class="dont-index">Source: <a href='https://github.com/lhdjung/scrutiny/blob/master/R/round.R'><code>R/round.R</code></a></small>
    <div class="hidden name"><code>round_up_from.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>round_up()</code> rounds up from 5, <code>round_down()</code> rounds down from
5. Otherwise, both functions work like <code><a href='https://rdrr.io/r/base/Round.html'>base::round()</a></code>.</p>
<p><code>round_up()</code> and <code>round_down()</code> are special cases of <code>round_up_from()</code> and
<code>round_down_from()</code>, which allow users to choose custom thresholds for
rounding up or down, respectively.</p>
    </div>

    <pre class="usage"><span class='fu'>round_up_from</span><span class='op'>(</span><span class='va'>x</span>, digits <span class='op'>=</span> <span class='fl'>0</span>, <span class='va'>threshold</span>, symmetric <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='fu'>round_down_from</span><span class='op'>(</span><span class='va'>x</span>, digits <span class='op'>=</span> <span class='fl'>0</span>, <span class='va'>threshold</span>, symmetric <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='fu'>round_up</span><span class='op'>(</span><span class='va'>x</span>, digits <span class='op'>=</span> <span class='fl'>0</span>, symmetric <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='fu'>round_down</span><span class='op'>(</span><span class='va'>x</span>, digits <span class='op'>=</span> <span class='fl'>0</span>, symmetric <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>Numeric. The decimal number to round.</p></td>
    </tr>
    <tr>
      <th>digits</th>
      <td><p>Integer. Number of digits to round <code>x</code> to. Default is <code>0</code>.</p></td>
    </tr>
    <tr>
      <th>threshold</th>
      <td><p>Integer (single digit). Only in <code>round_up_from()</code> and
<code>round_down_from()</code>. Threshold for rounding up or down, respectively. Value
is 5 in <code>round_up()</code>'s internal call to <code>round_up_from()</code> and in
<code>round_down()</code>'s internal call to <code>round_down_from()</code>.</p></td>
    </tr>
    <tr>
      <th>symmetric</th>
      <td><p>Boolean. Set <code>symmetric</code> to <code>TRUE</code> if the rounding of
negative numbers should mirror that of positive numbers so that their
absolute values are equal. Default is <code>FALSE</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Numeric. <code>x</code> rounded to <code>digits</code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>These functions differ from <code><a href='https://rdrr.io/r/base/Round.html'>base::round()</a></code> mainly insofar as the
decision about rounding 5 up or down is not based on the integer portion of
<code>x</code> (i.e., no "rounding to even"). Instead, in <code>round_up_from()</code>, that
decision is determined by the <code>threshold</code> argument for rounding up, and
likewise with <code>round_down_from()</code>. The threshold is constant at 5 for
<code>round_up()</code> and <code>round_down()</code>.</p>
<p>As a result, these functions are more predictable and less prone to
floating-point number quirks than <code><a href='https://rdrr.io/r/base/Round.html'>base::round()</a></code>. Compare <code>round_down()</code>
and <code><a href='https://rdrr.io/r/base/Round.html'>base::round()</a></code> in the data frame for rounding 5 created in the
Examples section below: <code>round_down()</code> yields a continuous sequence of
final digits from 0 to 9, whereas <code><a href='https://rdrr.io/r/base/Round.html'>base::round()</a></code> behaves in a way that can
only be explained by floating point issues.</p>
<p>However, this surprising behavior on the part of <code><a href='https://rdrr.io/r/base/Round.html'>base::round()</a></code> is not
necessarily a flaw (see its documentation, or this vignette:
https://rpubs.com/maechler/Rounding). In the present version of R (4.0.0 or
later), <code><a href='https://rdrr.io/r/base/Round.html'>base::round()</a></code> works fine, and the functions presented here are
not meant to replace it. Their main purpose as helpers within scrutiny is
to reconstruct the computations of researchers who might have used
different software. For example, SAS, SPSS, Stata, Matlab, and Excel round
up from 5, whereas Python rounds down from 5. Other use cases might
possibly include journal requirements.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='round_ceiling.html'>round_ceiling()</a></code> always rounds up, <code><a href='round_ceiling.html'>round_floor()</a></code> always rounds
down, <code><a href='round_ceiling.html'>round_trunc()</a></code> always rounds toward 0, and <code><a href='round_ceiling.html'>round_anti_trunc()</a></code>
always round away from 0.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'><span class='co'># Both `round_up()` and `round_down()` work like</span></span>
<span class='r-in'><span class='co'># `base::round()` unless the closest digit to be</span></span>
<span class='r-in'><span class='co'># cut off by rounding is 5:</span></span>
<span class='r-in'></span>
<span class='r-in'>   <span class='fu'>round_up</span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>9.273</span>, digits <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>     <span class='co'># 7 cut off</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 9.3</span>
<span class='r-in'> <span class='fu'>round_down</span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>9.273</span>, digits <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>     <span class='co'># 7 cut off</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 9.3</span>
<span class='r-in'><span class='fu'>base</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>9.273</span>, digits <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>     <span class='co'># 7 cut off</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 9.3</span>
<span class='r-in'></span>
<span class='r-in'>   <span class='fu'>round_up</span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>7.584</span>, digits <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>     <span class='co'># 4 cut off</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 7.58</span>
<span class='r-in'> <span class='fu'>round_down</span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>7.584</span>, digits <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>     <span class='co'># 4 cut off</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 7.58</span>
<span class='r-in'><span class='fu'>base</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>7.584</span>, digits <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>     <span class='co'># 4 cut off</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 7.58</span>
<span class='r-in'></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># Here is the borderline case of 5 rounded by</span></span>
<span class='r-in'><span class='co'># `round_up()`, `round_down()`, and `base::round()`:</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='va'>original</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>     <span class='co'># Define example values</span></span>
<span class='r-in'>    <span class='fl'>0.05</span>, <span class='fl'>0.15</span>, <span class='fl'>0.25</span>, <span class='fl'>0.35</span>, <span class='fl'>0.45</span>,</span>
<span class='r-in'>    <span class='fl'>0.55</span>, <span class='fl'>0.65</span>, <span class='fl'>0.75</span>, <span class='fl'>0.85</span>, <span class='fl'>0.95</span></span>
<span class='r-in'>    <span class='op'>)</span></span>
<span class='r-in'><span class='fu'>tibble</span><span class='fu'>::</span><span class='fu'><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></span><span class='op'>(</span>        <span class='co'># Output table</span></span>
<span class='r-in'>    <span class='va'>original</span>,</span>
<span class='r-in'>    round_up <span class='op'>=</span> <span class='fu'>round_up</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>original</span>, digits <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>,</span>
<span class='r-in'>    round_down <span class='op'>=</span> <span class='fu'>round_down</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>original</span>, digits <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>,</span>
<span class='r-in'>    base_round <span class='op'>=</span> <span class='fu'>base</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>original</span>, digits <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span></span>
<span class='r-in'>    <span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'># A tibble: 10 × 4</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>    original round_up round_down base_round</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>       <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>    <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>      <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>      <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 1</span>     0.05      0.1        0          0  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 2</span>     0.15      0.2        0.1        0.1</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 3</span>     0.25      0.3        0.2        0.2</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 4</span>     0.35      0.4        0.3        0.3</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 5</span>     0.45      0.5        0.4        0.4</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 6</span>     0.55      0.6        0.5        0.6</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 7</span>     0.65      0.7        0.6        0.7</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 8</span>     0.75      0.8        0.7        0.8</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 9</span>     0.85      0.9        0.8        0.8</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>10</span>     0.95      1          0.9        0.9</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># (Note: Defining `original` as `seq(0.05:0.95, by = 0.1)`</span></span>
<span class='r-in'><span class='co'># would lead to wrong results unless `original` is rounded</span></span>
<span class='r-in'><span class='co'># to 2 or so digits before it's rounded to 1.)</span></span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Lukas Jung.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


