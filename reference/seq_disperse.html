<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Sequence generation with dispersion at decimal level — seq_disperse • scrutiny</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Sequence generation with dispersion at decimal level — seq_disperse"><meta name="description" content="seq_disperse() creates a sequence around a given number. It
goes a specified number of steps up and down from it. Step size depends on
the number's decimal places. For example, 7.93 will be surrounded by
values like 7.91, 7.92, and 7.94, 7.95, etc.
seq_disperse_df() is a variant that creates a data frame. Further columns
can be added as in tibble::tibble(). Regular arguments are the same as
in seq_disperse(), but with a dot before each."><meta property="og:description" content="seq_disperse() creates a sequence around a given number. It
goes a specified number of steps up and down from it. Step size depends on
the number's decimal places. For example, 7.93 will be surrounded by
values like 7.91, 7.92, and 7.94, 7.95, etc.
seq_disperse_df() is a variant that creates a data frame. Further columns
can be added as in tibble::tibble(). Regular arguments are the same as
in seq_disperse(), but with a dot before each."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">scrutiny</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Consistency tests</h6></li>
    <li><a class="dropdown-item" href="../articles/grim.html">GRIM</a></li>
    <li><a class="dropdown-item" href="../articles/grimmer.html">GRIMMER</a></li>
    <li><a class="dropdown-item" href="../articles/debit.html">DEBIT</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Plausibility checks</h6></li>
    <li><a class="dropdown-item" href="../articles/duplicates.html">Duplication analysis</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Quick guides</h6></li>
    <li><a class="dropdown-item" href="../articles/rounding-options.html">Rounding options</a></li>
    <li><a class="dropdown-item" href="../articles/consistency-tests-simple.html">Implementing your consistency test</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Developer tools</h6></li>
    <li><a class="dropdown-item" href="../articles/rounding-in-depth.html">Rounding in depth</a></li>
    <li><a class="dropdown-item" href="../articles/consistency-tests-in-depth.html">Consistency tests in depth</a></li>
    <li><a class="dropdown-item" href="../articles/devtools.html">Developer tools</a></li>
    <li><a class="dropdown-item" href="../articles/wrangling.html">Data wrangling</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Other</h6></li>
    <li><a class="dropdown-item" href="../articles/related.html">Related software</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/lhdjung/scrutiny/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Sequence generation with dispersion at decimal level</h1>
      <small class="dont-index">Source: <a href="https://github.com/lhdjung/scrutiny/blob/main/R/seq-disperse.R" class="external-link"><code>R/seq-disperse.R</code></a></small>
      <div class="d-none name"><code>seq_disperse.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>seq_disperse()</code> creates a sequence around a given number. It
goes a specified number of steps up and down from it. Step size depends on
the number's decimal places. For example, <code>7.93</code> will be surrounded by
values like <code>7.91</code>, <code>7.92</code>, and <code>7.94</code>, <code>7.95</code>, etc.</p>
<p><code>seq_disperse_df()</code> is a variant that creates a data frame. Further columns
can be added as in <code><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble::tibble()</a></code>. Regular arguments are the same as
in <code>seq_disperse()</code>, but with a dot before each.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">seq_disperse</span><span class="op">(</span></span>
<span>  <span class="va">from</span>,</span>
<span>  by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dispersion <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,</span>
<span>  offset_from <span class="op">=</span> <span class="fl">0L</span>,</span>
<span>  out_min <span class="op">=</span> <span class="st">"auto"</span>,</span>
<span>  out_max <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  string_output <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  include_reported <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  track_diff_var <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  track_var_change <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">seq_disperse_df</span><span class="op">(</span></span>
<span>  <span class="va">.from</span>,</span>
<span>  .by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .dispersion <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,</span>
<span>  .offset_from <span class="op">=</span> <span class="fl">0L</span>,</span>
<span>  .out_min <span class="op">=</span> <span class="st">"auto"</span>,</span>
<span>  .out_max <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .string_output <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  .include_reported <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  .track_diff_var <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  .track_var_change <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-from-from">from, .from<a class="anchor" aria-label="anchor" href="#arg-from-from"></a></dt>
<dd><p>Numeric (or string coercible to numeric). Starting point of
the sequence.</p></dd>


<dt id="arg-by-by">by, .by<a class="anchor" aria-label="anchor" href="#arg-by-by"></a></dt>
<dd><p>Numeric. Step size of the sequence. If not set, inferred
automatically. Default is <code>NULL</code>.</p></dd>


<dt id="arg-dispersion-dispersion">dispersion, .dispersion<a class="anchor" aria-label="anchor" href="#arg-dispersion-dispersion"></a></dt>
<dd><p>Numeric. Vector that determines the steps up
and down, starting at <code>from</code> (or <code>.from</code>, respectively) and proceeding on
the level of its last decimal place. Default is <code>1:5</code>, i.e., five steps up
and down.</p></dd>


<dt id="arg-offset-from-offset-from">offset_from, .offset_from<a class="anchor" aria-label="anchor" href="#arg-offset-from-offset-from"></a></dt>
<dd><p>Integer. If set to a non-zero number, the
starting point will be offset by that many units on the level of the last
decimal digit. Default is <code>0</code>.</p></dd>


<dt id="arg-out-min-out-min-out-max-out-max">out_min, .out_min, out_max, .out_max<a class="anchor" aria-label="anchor" href="#arg-out-min-out-min-out-max-out-max"></a></dt>
<dd><p>If specified, output will be
restricted so that it's not below <code>out_min</code> or above <code>out_max</code>. Defaults
are <code>"auto"</code> for <code>out_min</code>, i.e., a minimum of one decimal unit above zero;
and <code>NULL</code> for <code>out_max</code>, i.e., no maximum.</p></dd>


<dt id="arg-string-output-string-output">string_output, .string_output<a class="anchor" aria-label="anchor" href="#arg-string-output-string-output"></a></dt>
<dd><p>Logical or string. If <code>TRUE</code> (the
default), the output is a string vector. Decimal places are then padded
with zeros to match <code>from</code>'s number of decimal places. <code>"auto"</code> works like
<code>TRUE</code> if and only if <code>from</code> (<code>.from</code>) is a string.</p></dd>


<dt id="arg-include-reported-include-reported">include_reported, .include_reported<a class="anchor" aria-label="anchor" href="#arg-include-reported-include-reported"></a></dt>
<dd><p>Logical. Should <code>from</code> (<code>.from</code>)
itself be part of the sequence built around it? Default is <code>TRUE</code> for the
sake of continuity, but this can be misleading if the focus is on the
dispersed values, as opposed to the input.</p></dd>


<dt id="arg-track-diff-var-track-diff-var">track_diff_var, .track_diff_var<a class="anchor" aria-label="anchor" href="#arg-track-diff-var-track-diff-var"></a></dt>
<dd><p>Logical. In <code>seq_disperse()</code>, ignore
this argument. In <code>seq_disperse_df()</code>, default is <code>TRUE</code>, which creates the
<code>"diff_var"</code> output column.</p></dd>


<dt id="arg-track-var-change-track-var-change">track_var_change, .track_var_change<a class="anchor" aria-label="anchor" href="#arg-track-var-change-track-var-change"></a></dt>
<dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated" class="external-link"><img src="figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a>
Renamed to <code>track_diff_var</code> / <code>.track_diff_var</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Further columns, added as in <code><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble::tibble()</a></code>. Only in
<code>seq_disperse_df()</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>

<ul><li><p><code>seq_disperse()</code> returns a string vector by default
(<code>string_output = TRUE</code>) and a numeric vector otherwise.</p></li>
<li><p><code>seq_disperse_df()</code> returns a tibble (data frame). The sequence is stored
in the <code>x</code> column. <code>x</code> is string by default (<code>.string_output = TRUE</code>),
numeric otherwise. Other columns might have been added via the dots
(<code>...</code>).</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Unlike <code><a href="seq-decimal.html">seq_endpoint()</a></code> and friends, the present functions don't
necessarily return continuous or even regular sequences. The greater
flexibility is due to the <code>dispersion</code> (<code>.dispersion</code>) argument, which
takes any numeric vector. By default, however, the output sequence is
regular and continuous.</p>
<p>Underlying this difference is the fact that <code>seq_disperse()</code> and
<code>seq_disperse_df()</code> do not wrap around <code><a href="https://rdrr.io/r/base/seq.html" class="external-link">base::seq()</a></code>, although they are
otherwise similar to <code><a href="seq-decimal.html">seq_endpoint()</a></code> and friends.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Conceptually, <code>seq_disperse()</code> is a blend of two function families:
those around <code><a href="seq-decimal.html">seq_endpoint()</a></code> and those around <code><a href="disperse.html">disperse()</a></code>. The
present functions were originally conceived for <code>seq_disperse_df()</code> to be a
helper within the <code><a href="function_map_seq.html">function_map_seq()</a></code> implementation.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Basic usage:</span></span></span>
<span class="r-in"><span><span class="fu">seq_disperse</span><span class="op">(</span>from <span class="op">=</span> <span class="fl">4.02</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "3.97" "3.98" "3.99" "4.00" "4.01" "4.02" "4.03" "4.04" "4.05" "4.06"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] "4.07"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># If trailing zeros don't matter,</span></span></span>
<span class="r-in"><span><span class="co"># the output can be numeric:</span></span></span>
<span class="r-in"><span><span class="fu">seq_disperse</span><span class="op">(</span>from <span class="op">=</span> <span class="fl">4.02</span>, string_output <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 3.97 3.98 3.99 4.00 4.01 4.02 4.03 4.04 4.05 4.06 4.07</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Control steps up and down with</span></span></span>
<span class="r-in"><span><span class="co"># `dispersion` (default is `1:5`):</span></span></span>
<span class="r-in"><span><span class="fu">seq_disperse</span><span class="op">(</span>from <span class="op">=</span> <span class="fl">4.02</span>, dispersion <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "3.92" "3.93" "3.94" "3.95" "3.96" "3.97" "3.98" "3.99" "4.00" "4.01"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] "4.02" "4.03" "4.04" "4.05" "4.06" "4.07" "4.08" "4.09" "4.10" "4.11"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [21] "4.12"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Sequences might be discontinuous...</span></span></span>
<span class="r-in"><span><span class="va">disp1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">2</span>, to <span class="op">=</span> <span class="fl">10</span>, by <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">seq_disperse</span><span class="op">(</span>from <span class="op">=</span> <span class="fl">4.02</span>, dispersion <span class="op">=</span> <span class="va">disp1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "3.92" "3.94" "3.96" "3.98" "4.00" "4.02" "4.04" "4.06" "4.08" "4.10"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] "4.12"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ...or even irregular:</span></span></span>
<span class="r-in"><span><span class="va">disp2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">7</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">seq_disperse</span><span class="op">(</span>from <span class="op">=</span> <span class="fl">4.02</span>, dispersion <span class="op">=</span> <span class="va">disp2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "3.95" "3.99" "4.00" "4.02" "4.04" "4.05" "4.09"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The data fame variant supports further</span></span></span>
<span class="r-in"><span><span class="co"># columns added as in `tibble::tibble()`:</span></span></span>
<span class="r-in"><span><span class="fu">seq_disperse_df</span><span class="op">(</span>.from <span class="op">=</span> <span class="fl">4.02</span>, n <span class="op">=</span> <span class="fl">45</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 11 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    x         n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 3.97     45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 3.98     45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 3.99     45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 4.00     45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 4.01     45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 4.02     45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 4.03     45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 4.04     45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 4.05     45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 4.06     45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> 4.07     45</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lukas Jung.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

